# PIPELINE DEFINITION
# Name: final-year-project-deployment
# Description: Deploy namespace and all backend/frontend/email-server services
components:
  comp-apply-manifest-op:
    executorLabel: exec-apply-manifest-op
    inputDefinitions:
      parameters:
        manifest_path:
          parameterType: STRING
  comp-apply-manifest-op-2:
    executorLabel: exec-apply-manifest-op-2
    inputDefinitions:
      parameters:
        manifest_path:
          parameterType: STRING
  comp-apply-manifest-op-3:
    executorLabel: exec-apply-manifest-op-3
    inputDefinitions:
      parameters:
        manifest_path:
          parameterType: STRING
  comp-apply-manifest-op-4:
    executorLabel: exec-apply-manifest-op-4
    inputDefinitions:
      parameters:
        manifest_path:
          parameterType: STRING
deploymentSpec:
  executors:
    exec-apply-manifest-op:
      container:
        command:
        - kubectl
        - apply
        - -f
        - '{{$.inputs.parameters[''manifest_path'']}}'
        image: 010123070122/fyp-kubectl:latest
    exec-apply-manifest-op-2:
      container:
        command:
        - kubectl
        - apply
        - -f
        - '{{$.inputs.parameters[''manifest_path'']}}'
        image: 010123070122/fyp-kubectl:latest
    exec-apply-manifest-op-3:
      container:
        command:
        - kubectl
        - apply
        - -f
        - '{{$.inputs.parameters[''manifest_path'']}}'
        image: 010123070122/fyp-kubectl:latest
    exec-apply-manifest-op-4:
      container:
        command:
        - kubectl
        - apply
        - -f
        - '{{$.inputs.parameters[''manifest_path'']}}'
        image: 010123070122/fyp-kubectl:latest
pipelineInfo:
  description: Deploy namespace and all backend/frontend/email-server services
  name: final-year-project-deployment
root:
  dag:
    tasks:
      apply-manifest-op:
        cachingOptions:
          enableCache: true
        componentRef:
          name: comp-apply-manifest-op
        inputs:
          parameters:
            manifest_path:
              runtimeValue:
                constant: /k8s/namespace.yaml
        taskInfo:
          name: apply-manifest-op
      apply-manifest-op-2:
        cachingOptions:
          enableCache: true
        componentRef:
          name: comp-apply-manifest-op-2
        dependentTasks:
        - apply-manifest-op
        inputs:
          parameters:
            manifest_path:
              runtimeValue:
                constant: /k8s/backend-deployment.yaml
        taskInfo:
          name: apply-manifest-op-2
      apply-manifest-op-3:
        cachingOptions:
          enableCache: true
        componentRef:
          name: comp-apply-manifest-op-3
        dependentTasks:
        - apply-manifest-op-2
        inputs:
          parameters:
            manifest_path:
              runtimeValue:
                constant: /k8s/frontend-deployment.yaml
        taskInfo:
          name: apply-manifest-op-3
      apply-manifest-op-4:
        cachingOptions:
          enableCache: true
        componentRef:
          name: comp-apply-manifest-op-4
        dependentTasks:
        - apply-manifest-op-3
        inputs:
          parameters:
            manifest_path:
              runtimeValue:
                constant: /k8s/email-server-deployment.yaml
        taskInfo:
          name: apply-manifest-op-4
schemaVersion: 2.1.0
sdkVersion: kfp-2.13.0
