{"ast":null,"code":"var _jsxFileName = \"/Users/bijaythapa/Desktop/secure-aid/frontend/src/App.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { ethers } from 'ethers';\nimport axios from 'axios';\n\n// --- IMPORTANT CONFIGURATION ---\n// This is your working configuration.\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst contractAddress = \"0x78DF59611e694495DF4859d1be817211Dc49dA72\";\nconst contractABI = [{\n  \"inputs\": [],\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"constructor\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": true,\n    \"internalType\": \"address\",\n    \"name\": \"donor\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"amount\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"timestamp\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"DonationReceived\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": true,\n    \"internalType\": \"address\",\n    \"name\": \"to\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"amount\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"timestamp\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"Withdrawal\",\n  \"type\": \"event\"\n}, {\n  \"inputs\": [],\n  \"name\": \"donorCount\",\n  \"outputs\": [{\n    \"internalType\": \"uint256\",\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"stateMutability\": \"view\",\n  \"type\": \"function\",\n  \"constant\": true\n}, {\n  \"inputs\": [{\n    \"internalType\": \"address\",\n    \"name\": \"\",\n    \"type\": \"address\"\n  }],\n  \"name\": \"donors\",\n  \"outputs\": [{\n    \"internalType\": \"uint256\",\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"stateMutability\": \"view\",\n  \"type\": \"function\",\n  \"constant\": true\n}, {\n  \"inputs\": [],\n  \"name\": \"owner\",\n  \"outputs\": [{\n    \"internalType\": \"address\",\n    \"name\": \"\",\n    \"type\": \"address\"\n  }],\n  \"stateMutability\": \"view\",\n  \"type\": \"function\",\n  \"constant\": true\n}, {\n  \"inputs\": [],\n  \"name\": \"totalDonations\",\n  \"outputs\": [{\n    \"internalType\": \"uint256\",\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"stateMutability\": \"view\",\n  \"type\": \"function\",\n  \"constant\": true\n}, {\n  \"inputs\": [],\n  \"name\": \"donate\",\n  \"outputs\": [],\n  \"stateMutability\": \"payable\",\n  \"type\": \"function\",\n  \"payable\": true\n}, {\n  \"inputs\": [{\n    \"internalType\": \"address payable\",\n    \"name\": \"_to\",\n    \"type\": \"address\"\n  }, {\n    \"internalType\": \"uint256\",\n    \"name\": \"_amount\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"withdraw\",\n  \"outputs\": [],\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"inputs\": [],\n  \"name\": \"getContractBalance\",\n  \"outputs\": [{\n    \"internalType\": \"uint256\",\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"stateMutability\": \"view\",\n  \"type\": \"function\",\n  \"constant\": true\n}, {\n  \"inputs\": [],\n  \"name\": \"getDonorCount\",\n  \"outputs\": [{\n    \"internalType\": \"uint256\",\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"stateMutability\": \"view\",\n  \"type\": \"function\",\n  \"constant\": true\n}];\n// --- END CONFIGURATION ---\n\nconst App = () => {\n  _s();\n  const [account, setAccount] = useState(null);\n  const [provider, setProvider] = useState(null);\n  const [signer, setSigner] = useState(null);\n  const [contract, setContract] = useState(null);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [totalDonations, setTotalDonations] = useState('0');\n  const [contractBalance, setContractBalance] = useState('0');\n  const [donorCount, setDonorCount] = useState(0);\n  const [donors, setDonors] = useState([]);\n\n  // FIX for single-character bug: All form fields are in one state object.\n  const [formData, setFormData] = useState({\n    donationAmount: '',\n    donorName: '',\n    donorMessage: '',\n    withdrawAmount: '',\n    withdrawAddress: ''\n  });\n\n  // UI State\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [successMessage, setSuccessMessage] = useState('');\n  const [activeTab, setActiveTab] = useState('donate');\n  // NEW: State for theme management\n  const [theme, setTheme] = useState('light');\n\n  // FIX for input fields: A single handler updates the formData state object.\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  // NEW: Function to toggle theme and save preference\n  const toggleTheme = () => {\n    const newTheme = theme === 'light' ? 'dark' : 'light';\n    setTheme(newTheme);\n    localStorage.setItem('theme', newTheme);\n    document.documentElement.classList.toggle('dark', newTheme === 'dark');\n  };\n\n  // --- Data Fetching and Initialization ---\n\n  const fetchContractData = useCallback(async currentContract => {\n    if (!currentContract) return;\n    try {\n      console.log(\"Attempting to fetch contract data...\");\n      const total = await currentContract.totalDonations();\n      const balance = await currentContract.getContractBalance();\n      const count = await currentContract.getDonorCount();\n      setTotalDonations(ethers.utils.formatEther(total));\n      setContractBalance(ethers.utils.formatEther(balance));\n      setDonorCount(count.toNumber());\n      console.log(\"‚úÖ Contract data fetched successfully.\");\n      setError('');\n    } catch (err) {\n      console.error(\"‚ùå Error fetching smart contract data:\", err);\n      setError('Could not fetch data. Please follow the README troubleshooting steps.');\n    }\n  }, []);\n  const fetchDonorsFromDB = useCallback(async () => {\n    try {\n      console.log(\"Attempting to fetch donor history from backend...\");\n      const response = await axios.get('http://localhost:5001/api/donors');\n      setDonors(response.data.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp)));\n      console.log(\"‚úÖ Donor history fetched successfully.\");\n    } catch (err) {\n      console.error(\"‚ùå Error fetching donors from the database:\", err);\n      setError('Could not fetch transaction history. Is the backend server running?');\n    }\n  }, []);\n\n  // This useEffect runs once on mount to initialize everything.\n  useEffect(() => {\n    // NEW: Set initial theme from localStorage or system preference\n    if (localStorage.theme === 'dark' || !('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches) {\n      document.documentElement.classList.add('dark');\n      setTheme('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n      setTheme('light');\n    }\n    const init = async () => {\n      setError('');\n      if (window.ethereum) {\n        try {\n          const web3Provider = new ethers.providers.Web3Provider(window.ethereum);\n          const web3Signer = web3Provider.getSigner();\n          const accounts = await web3Provider.send('eth_requestAccounts', []);\n          const donationContract = new ethers.Contract(contractAddress, contractABI, web3Signer);\n          setProvider(web3Provider);\n          setSigner(web3Signer);\n          setAccount(accounts[0]);\n          setContract(donationContract);\n          const owner = await donationContract.owner();\n          setIsAdmin(accounts[0].toLowerCase() === owner.toLowerCase());\n          await fetchContractData(donationContract);\n          await fetchDonorsFromDB();\n        } catch (err) {\n          console.error(\"‚ùå Error during initialization:\", err);\n          setError(\"Failed to initialize. Please connect to MetaMask and follow the README troubleshooting guide.\");\n        }\n      } else {\n        setError(\"MetaMask is not installed. Please install it to use this dApp.\");\n      }\n    };\n    init();\n    if (window.ethereum) {\n      window.ethereum.on('accountsChanged', () => window.location.reload());\n      window.ethereum.on('chainChanged', () => window.location.reload());\n    }\n  }, [fetchContractData, fetchDonorsFromDB]);\n\n  // --- Core Functions (Donation & Withdrawal) ---\n\n  const handleDonate = async e => {\n    e.preventDefault();\n    const {\n      donationAmount,\n      donorName,\n      donorMessage\n    } = formData;\n    if (!donationAmount || isNaN(donationAmount) || donationAmount <= 0 || !donorName) {\n      setError(\"Please enter a valid name and donation amount.\");\n      return;\n    }\n    if (!contract || !signer || !provider) {\n      setError(\"Application not properly connected. Please refresh.\");\n      return;\n    }\n    setLoading(true);\n    setError('');\n    setSuccessMessage('');\n    try {\n      const amountInWei = ethers.utils.parseEther(donationAmount);\n      const gasPrice = await provider.getGasPrice();\n      const tx = await contract.connect(signer).donate({\n        value: amountInWei,\n        gasPrice: gasPrice\n      });\n      setSuccessMessage(\"Processing donation... waiting for blockchain confirmation.\");\n      const receipt = await tx.wait();\n      await axios.post('http://localhost:5001/api/donors', {\n        donorAddress: account,\n        name: donorName,\n        message: donorMessage,\n        amount: donationAmount,\n        transactionHash: receipt.transactionHash\n      });\n      setSuccessMessage(`Donation successful! Thank you! TX: ${receipt.transactionHash.slice(0, 6)}...${receipt.transactionHash.slice(-4)}`);\n      setFormData(prev => ({\n        ...prev,\n        donorName: '',\n        donationAmount: '',\n        donorMessage: ''\n      }));\n      await fetchContractData(contract);\n      await fetchDonorsFromDB();\n    } catch (err) {\n      console.error(\"Donation Error:\", err);\n      // setError(err.reason || \"Transaction failed. Please reset your MetaMask account (see README) and try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleWithdraw = async e => {\n    e.preventDefault();\n    const {\n      withdrawAmount,\n      withdrawAddress\n    } = formData;\n    if (!withdrawAmount || isNaN(withdrawAmount) || withdrawAmount <= 0 || !withdrawAddress) {\n      setError(\"Please enter a valid amount and address.\");\n      return;\n    }\n    if (!ethers.utils.isAddress(withdrawAddress)) {\n      setError(\"Invalid recipient address.\");\n      return;\n    }\n    setLoading(true);\n    setError('');\n    setSuccessMessage('');\n    try {\n      const amountInWei = ethers.utils.parseEther(withdrawAmount);\n      const gasPrice = await provider.getGasPrice();\n      const tx = await contract.connect(signer).withdraw(withdrawAddress, amountInWei, {\n        gasPrice: gasPrice\n      });\n      await tx.wait();\n      setSuccessMessage(\"Withdrawal successful!\");\n      await fetchContractData(contract);\n    } catch (err) {\n      console.error(\"Withdrawal Error:\", err);\n      setError(err.reason || \"Withdrawal failed. Please reset your MetaMask account and try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // --- UI Components ---\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-white min-h-screen font-sans transition-colors duration-300\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"bg-white dark:bg-gray-800 shadow-lg p-4 flex justify-between items-center sticky top-0 z-10\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold text-teal-500 dark:text-teal-400\",\n        children: \"\\uD83D\\uDEE1\\uFE0F SecureAid\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: toggleTheme,\n          className: \"text-2xl p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700\",\n          children: theme === 'light' ? 'üåô' : '‚òÄÔ∏è'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 21\n        }, this), account && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm bg-gray-200 dark:bg-gray-700 px-3 py-1 rounded-full\",\n          children: [\"Connected: \", account.slice(0, 6), \"...\", account.slice(-4)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"container mx-auto p-4 md:p-8\",\n      children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md mb-4\",\n        role: \"alert\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 27\n      }, this), successMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-md mb-4\",\n        role: \"alert\",\n        children: successMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 36\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(StatCard, {\n          title: \"Total Donations Raised\",\n          value: `${parseFloat(totalDonations).toFixed(4)} ETH`,\n          color: \"text-teal-500 dark:text-teal-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n          title: \"Total Unique Donors\",\n          value: donorCount,\n          color: \"text-gray-800 dark:text-white\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n          title: \"Current Contract Balance\",\n          value: `${parseFloat(contractBalance).toFixed(4)} ETH`,\n          color: \"text-green-500 dark:text-green-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-8 flex justify-center border-b border-gray-200 dark:border-gray-700\",\n        children: [/*#__PURE__*/_jsxDEV(TabButton, {\n          name: \"donate\",\n          activeTab: activeTab,\n          setActiveTab: setActiveTab,\n          children: \"Donate\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 21\n        }, this), isAdmin && /*#__PURE__*/_jsxDEV(TabButton, {\n          name: \"admin\",\n          activeTab: activeTab,\n          setActiveTab: setActiveTab,\n          children: \"Admin Panel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-8 bg-white dark:bg-gray-800 p-8 rounded-xl shadow-2xl max-w-2xl mx-auto\",\n        children: [activeTab === 'donate' ? /*#__PURE__*/_jsxDEV(DonateForm, {\n          formData: formData,\n          handleInputChange: handleInputChange,\n          handleDonate: handleDonate,\n          loading: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 47\n        }, this) : null, activeTab === 'admin' && isAdmin ? /*#__PURE__*/_jsxDEV(AdminPanel, {\n          formData: formData,\n          handleInputChange: handleInputChange,\n          handleWithdraw: handleWithdraw,\n          loading: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 57\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TransactionHistory, {\n        donors: donors\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 387,\n    columnNumber: 9\n  }, this);\n};\n\n// --- Helper Components ---\n_s(App, \"rdKQo5HJ1BPoYpbESykXMkUH5Cs=\");\n_c = App;\nconst StatCard = ({\n  title,\n  value,\n  color\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"bg-white dark:bg-gray-800 p-6 rounded-lg text-center shadow-lg transition-transform hover:scale-105\",\n  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n    className: \"text-lg text-gray-500 dark:text-gray-400 mb-2\",\n    children: title\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 437,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n    className: `text-4xl font-bold ${color}`,\n    children: value\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 438,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 436,\n  columnNumber: 5\n}, this);\n_c2 = StatCard;\nconst TabButton = ({\n  name,\n  activeTab,\n  setActiveTab,\n  children\n}) => /*#__PURE__*/_jsxDEV(\"button\", {\n  onClick: () => setActiveTab(name),\n  className: `px-6 py-3 font-semibold transition-colors duration-300 ${activeTab === name ? 'text-teal-500 border-b-2 border-teal-500' : 'text-gray-400 hover:text-teal-500'}`,\n  children: children\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 443,\n  columnNumber: 5\n}, this);\n_c3 = TabButton;\nconst Input = ({\n  name,\n  type = \"text\",\n  value,\n  onChange,\n  placeholder\n}) => /*#__PURE__*/_jsxDEV(\"input\", {\n  name: name,\n  type: type,\n  value: value,\n  onChange: onChange,\n  placeholder: placeholder,\n  className: \"w-full p-3 bg-gray-100 dark:bg-gray-700 rounded-md border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-teal-500\",\n  required: true\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 449,\n  columnNumber: 5\n}, this);\n_c4 = Input;\nconst Textarea = ({\n  name,\n  value,\n  onChange,\n  placeholder\n}) => /*#__PURE__*/_jsxDEV(\"textarea\", {\n  name: name,\n  value: value,\n  onChange: onChange,\n  placeholder: placeholder,\n  className: \"w-full p-3 bg-gray-100 dark:bg-gray-700 rounded-md border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-teal-500\",\n  rows: \"3\"\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 453,\n  columnNumber: 5\n}, this);\n_c5 = Textarea;\nconst DonateForm = ({\n  formData,\n  handleInputChange,\n  handleDonate,\n  loading\n}) => /*#__PURE__*/_jsxDEV(\"form\", {\n  onSubmit: handleDonate,\n  className: \"space-y-4\",\n  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n    className: \"text-xl font-bold text-center mb-4\",\n    children: \"Make Your Contribution\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 458,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(Input, {\n    name: \"donorName\",\n    value: formData.donorName,\n    onChange: handleInputChange,\n    placeholder: \"Your Name\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 459,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(Input, {\n    name: \"donationAmount\",\n    value: formData.donationAmount,\n    onChange: handleInputChange,\n    placeholder: \"Amount in ETH (e.g., 0.1)\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 460,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(Textarea, {\n    name: \"donorMessage\",\n    value: formData.donorMessage,\n    onChange: handleInputChange,\n    placeholder: \"Leave a message (optional)\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 461,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n    type: \"submit\",\n    disabled: loading,\n    className: \"w-full bg-teal-500 hover:bg-teal-600 text-white font-bold py-3 px-4 rounded-md transition duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600\",\n    children: loading ? 'Processing...' : 'Donate Now'\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 462,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 457,\n  columnNumber: 5\n}, this);\n_c6 = DonateForm;\nconst AdminPanel = ({\n  formData,\n  handleInputChange,\n  handleWithdraw,\n  loading\n}) => /*#__PURE__*/_jsxDEV(\"form\", {\n  onSubmit: handleWithdraw,\n  className: \"space-y-4\",\n  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n    className: \"text-xl font-bold text-center text-red-500 mb-4\",\n    children: \"Admin Controls\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 470,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(Input, {\n    name: \"withdrawAddress\",\n    value: formData.withdrawAddress,\n    onChange: handleInputChange,\n    placeholder: \"Recipient Address\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 471,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(Input, {\n    name: \"withdrawAmount\",\n    value: formData.withdrawAmount,\n    onChange: handleInputChange,\n    placeholder: \"Amount in ETH\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 472,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n    type: \"submit\",\n    disabled: loading,\n    className: \"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-md transition duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600\",\n    children: loading ? 'Processing...' : 'Withdraw Funds'\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 473,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 469,\n  columnNumber: 5\n}, this);\n_c7 = AdminPanel;\nconst TransactionHistory = ({\n  donors\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"mt-12\",\n  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n    className: \"text-2xl font-bold text-center mb-6\",\n    children: \"Live Transaction History\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 481,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-4xl mx-auto space-y-4\",\n    children: donors.length > 0 ? donors.map(donor => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md flex justify-between items-start\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold text-teal-500 dark:text-teal-400\",\n          children: [donor.name, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-500 dark:text-gray-400 font-normal\",\n            children: \"donated\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 96\n          }, this), \" \", donor.amount, \" ETH\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-600 dark:text-gray-300 mt-1\",\n          children: [\"\\\"\", donor.message || 'No message', \"\\\"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs text-gray-400 dark:text-gray-500 mt-2 font-mono\",\n          children: [\"From: \", donor.donorAddress]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-right text-xs text-gray-400 dark:text-gray-500\",\n        children: [new Date(donor.timestamp).toLocaleString(), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: `https://etherscan.io/tx/${donor.transactionHash}`,\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          className: \"block text-teal-500 hover:underline mt-1\",\n          children: \"View on Etherscan\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 490,\n        columnNumber: 21\n      }, this)]\n    }, donor._id || donor.transactionHash, true, {\n      fileName: _jsxFileName,\n      lineNumber: 484,\n      columnNumber: 17\n    }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-400\",\n        children: \"No donations yet. Be the first!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 97\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 496,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 482,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 480,\n  columnNumber: 5\n}, this);\n_c8 = TransactionHistory;\nexport default App;\n\n// import React, { useState, useEffect, useCallback } from 'react';\n// import { ethers } from 'ethers';\n// import axios from 'axios';\n\n// // --- IMPORTANT CONFIGURATION ---\n// // Remember to follow the README guide to get these values after deploying\n// const contractAddress = \"0x78DF59611e694495DF4859d1be817211Dc49dA72\"; \n// const contractABI = [\n//     {\n//       \"inputs\": [],\n//       \"stateMutability\": \"nonpayable\",\n//       \"type\": \"constructor\"\n//     },\n//     {\n//       \"anonymous\": false,\n//       \"inputs\": [\n//         {\n//           \"indexed\": true,\n//           \"internalType\": \"address\",\n//           \"name\": \"donor\",\n//           \"type\": \"address\"\n//         },\n//         {\n//           \"indexed\": false,\n//           \"internalType\": \"uint256\",\n//           \"name\": \"amount\",\n//           \"type\": \"uint256\"\n//         },\n//         {\n//           \"indexed\": false,\n//           \"internalType\": \"uint256\",\n//           \"name\": \"timestamp\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"name\": \"DonationReceived\",\n//       \"type\": \"event\"\n//     },\n//     {\n//       \"anonymous\": false,\n//       \"inputs\": [\n//         {\n//           \"indexed\": true,\n//           \"internalType\": \"address\",\n//           \"name\": \"to\",\n//           \"type\": \"address\"\n//         },\n//         {\n//           \"indexed\": false,\n//           \"internalType\": \"uint256\",\n//           \"name\": \"amount\",\n//           \"type\": \"uint256\"\n//         },\n//         {\n//           \"indexed\": false,\n//           \"internalType\": \"uint256\",\n//           \"name\": \"timestamp\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"name\": \"Withdrawal\",\n//       \"type\": \"event\"\n//     },\n//     {\n//       \"inputs\": [],\n//       \"name\": \"donorCount\",\n//       \"outputs\": [\n//         {\n//           \"internalType\": \"uint256\",\n//           \"name\": \"\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"stateMutability\": \"view\",\n//       \"type\": \"function\",\n//       \"constant\": true\n//     },\n//     {\n//       \"inputs\": [\n//         {\n//           \"internalType\": \"address\",\n//           \"name\": \"\",\n//           \"type\": \"address\"\n//         }\n//       ],\n//       \"name\": \"donors\",\n//       \"outputs\": [\n//         {\n//           \"internalType\": \"uint256\",\n//           \"name\": \"\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"stateMutability\": \"view\",\n//       \"type\": \"function\",\n//       \"constant\": true\n//     },\n//     {\n//       \"inputs\": [],\n//       \"name\": \"owner\",\n//       \"outputs\": [\n//         {\n//           \"internalType\": \"address\",\n//           \"name\": \"\",\n//           \"type\": \"address\"\n//         }\n//       ],\n//       \"stateMutability\": \"view\",\n//       \"type\": \"function\",\n//       \"constant\": true\n//     },\n//     {\n//       \"inputs\": [],\n//       \"name\": \"totalDonations\",\n//       \"outputs\": [\n//         {\n//           \"internalType\": \"uint256\",\n//           \"name\": \"\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"stateMutability\": \"view\",\n//       \"type\": \"function\",\n//       \"constant\": true\n//     },\n//     {\n//       \"inputs\": [],\n//       \"name\": \"donate\",\n//       \"outputs\": [],\n//       \"stateMutability\": \"payable\",\n//       \"type\": \"function\",\n//       \"payable\": true\n//     },\n//     {\n//       \"inputs\": [\n//         {\n//           \"internalType\": \"address payable\",\n//           \"name\": \"_to\",\n//           \"type\": \"address\"\n//         },\n//         {\n//           \"internalType\": \"uint256\",\n//           \"name\": \"_amount\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"name\": \"withdraw\",\n//       \"outputs\": [],\n//       \"stateMutability\": \"nonpayable\",\n//       \"type\": \"function\"\n//     },\n//     {\n//       \"inputs\": [],\n//       \"name\": \"getContractBalance\",\n//       \"outputs\": [\n//         {\n//           \"internalType\": \"uint256\",\n//           \"name\": \"\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"stateMutability\": \"view\",\n//       \"type\": \"function\",\n//       \"constant\": true\n//     },\n//     {\n//       \"inputs\": [],\n//       \"name\": \"getDonorCount\",\n//       \"outputs\": [\n//         {\n//           \"internalType\": \"uint256\",\n//           \"name\": \"\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"stateMutability\": \"view\",\n//       \"type\": \"function\",\n//       \"constant\": true\n//     }\n//   ];\n// // --- END CONFIGURATION ---\n\n// const App = () => {\n//     // State variables\n//     const [account, setAccount] = useState(null);\n//     const [provider, setProvider] = useState(null);\n//     const [signer, setSigner] = useState(null);\n//     const [contract, setContract] = useState(null);\n//     const [isAdmin, setIsAdmin] = useState(false);\n//     const [totalDonations, setTotalDonations] = useState('0');\n//     const [contractBalance, setContractBalance] = useState('0');\n//     const [donorCount, setDonorCount] = useState(0);\n//     const [donors, setDonors] = useState([]);\n\n//     // Form inputs - Storing them in a single state object can help prevent re-render issues\n//     const [formData, setFormData] = useState({\n//         donationAmount: '',\n//         donorName: '',\n//         donorMessage: '',\n//         withdrawAmount: '',\n//         withdrawAddress: ''\n//     });\n\n//     // UI State\n//     const [loading, setLoading] = useState(false);\n//     const [error, setError] = useState('');\n//     const [successMessage, setSuccessMessage] = useState('');\n//     const [activeTab, setActiveTab] = useState('donate');\n\n//     // FIX for input fields: Handle all form changes with a single function\n//     const handleInputChange = (e) => {\n//         const { name, value } = e.target;\n//         setFormData(prev => ({ ...prev, [name]: value }));\n//     };\n\n//     const fetchContractData = useCallback(async (currentContract) => {\n//         if (!currentContract) return;\n//         try {\n//             console.log(\"Attempting to fetch contract data...\");\n//             const total = await currentContract.totalDonations();\n//             const balance = await currentContract.getContractBalance();\n//             const count = await currentContract.getDonorCount();\n\n//             setTotalDonations(ethers.utils.formatEther(total));\n//             setContractBalance(ethers.utils.formatEther(balance));\n//             setDonorCount(count.toNumber());\n//             console.log(\"‚úÖ Contract data fetched successfully.\");\n//             setError(''); \n//         } catch (err) {\n//             console.error(\"‚ùå Error fetching smart contract data:\", err);\n//             setError('Could not fetch data. Please follow the README troubleshooting steps.');\n//         }\n//     }, []);\n\n//     const fetchDonorsFromDB = useCallback(async () => {\n//         try {\n//             console.log(\"Attempting to fetch donor history from backend...\");\n//             const response = await axios.get('http://localhost:5001/api/donors');\n//             setDonors(response.data.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp)));\n//             console.log(\"‚úÖ Donor history fetched successfully.\");\n//         } catch (err) {\n//             console.error(\"‚ùå Error fetching donors from the database:\", err);\n//             setError('Could not fetch transaction history. Is the backend server running?');\n//         }\n//     }, []);\n\n//     // This useEffect should only run once to initialize everything\n//     useEffect(() => {\n//         const init = async () => {\n//             setError('');\n//             if (window.ethereum) {\n//                 try {\n//                     const web3Provider = new ethers.providers.Web3Provider(window.ethereum);\n//                     const web3Signer = web3Provider.getSigner();\n//                     // Request accounts on initial load\n//                     const accounts = await web3Provider.send('eth_requestAccounts', []);\n\n//                     const donationContract = new ethers.Contract(contractAddress, contractABI, web3Signer);\n\n//                     setProvider(web3Provider);\n//                     setSigner(web3Signer);\n//                     setAccount(accounts[0]);\n//                     setContract(donationContract);\n\n//                     const owner = await donationContract.owner();\n//                     setIsAdmin(accounts[0].toLowerCase() === owner.toLowerCase());\n\n//                     await fetchContractData(donationContract);\n//                     await fetchDonorsFromDB();\n\n//                 } catch (err) {\n//                     console.error(\"‚ùå Error during initialization:\", err);\n//                     setError(\"Failed to initialize. Please connect to MetaMask and follow the README troubleshooting guide.\");\n//                 }\n//             } else {\n//                 setError(\"MetaMask is not installed. Please install it to use this dApp.\");\n//             }\n//         };\n\n//         init();\n\n//         if(window.ethereum) {\n//             window.ethereum.on('accountsChanged', () => window.location.reload());\n//             window.ethereum.on('chainChanged', () => window.location.reload());\n//         }\n//     }, [fetchContractData, fetchDonorsFromDB]);\n\n//     const handleDonate = async (e) => {\n//         e.preventDefault();\n//         const { donationAmount, donorName, donorMessage } = formData;\n\n//         if (!donationAmount || isNaN(donationAmount) || donationAmount <= 0 || !donorName) {\n//             setError(\"Please enter a valid name and donation amount.\");\n//             return;\n//         }\n//         if (!contract || !signer || !provider) {\n//             setError(\"Application not properly connected. Please refresh.\");\n//             return;\n//         }\n\n//         setLoading(true);\n//         setError('');\n//         setSuccessMessage('');\n\n//         try {\n//             const amountInWei = ethers.utils.parseEther(donationAmount);\n\n//             const gasPrice = await provider.getGasPrice();\n//             const tx = await contract.connect(signer).donate({ \n//                 value: amountInWei,\n//                 gasPrice: gasPrice \n//             });\n\n//             setSuccessMessage(\"Processing donation... waiting for blockchain confirmation.\");\n//             const receipt = await tx.wait();\n\n//             await axios.post('http://localhost:5001/api/donors', {\n//                 donorAddress: account,\n//                 name: donorName,\n//                 message: donorMessage,\n//                 amount: donationAmount,\n//                 transactionHash: receipt.transactionHash,\n//             });\n\n//             setSuccessMessage(`Donation successful! Thank you! TX: ${receipt.transactionHash.slice(0, 6)}...${receipt.transactionHash.slice(-4)}`);\n//             setFormData(prev => ({ ...prev, donorName: '', donationAmount: '', donorMessage: ''}));\n\n//             await fetchContractData(contract);\n//             await fetchDonorsFromDB();\n\n//         } catch (err) {\n//             console.error(\"Donation Error:\", err);\n//             setError(err.reason || \"Transaction failed. Please reset your MetaMask account (see README) and try again.\");\n//         } finally {\n//             setLoading(false);\n//         }\n//     };\n\n//     const handleWithdraw = async (e) => {\n//         e.preventDefault();\n//         const { withdrawAmount, withdrawAddress } = formData;\n//         if (!withdrawAmount || isNaN(withdrawAmount) || withdrawAmount <= 0 || !withdrawAddress) {\n//             setError(\"Please enter a valid amount and address.\");\n//             return;\n//         }\n//         if (!ethers.utils.isAddress(withdrawAddress)) {\n//             setError(\"Invalid recipient address.\");\n//             return;\n//         }\n\n//         setLoading(true);\n//         setError('');\n//         setSuccessMessage('');\n\n//         try {\n//             const amountInWei = ethers.utils.parseEther(withdrawAmount);\n//             const gasPrice = await provider.getGasPrice();\n//             const tx = await contract.connect(signer).withdraw(withdrawAddress, amountInWei, {\n//                 gasPrice: gasPrice\n//             });\n\n//             await tx.wait();\n//             setSuccessMessage(\"Withdrawal successful!\");\n//             await fetchContractData(contract);\n\n//         } catch (err) {\n//             console.error(\"Withdrawal Error:\", err);\n//             setError(err.reason || \"Withdrawal failed. Please reset your MetaMask account and try again.\");\n//         } finally {\n//             setLoading(false);\n//         }\n//     };\n\n//     // --- UI Components ---\n//     // (Components are unchanged, but they now use formData state via handleInputChange)\n\n//     const Header = () => (\n//         <header className=\"bg-gray-800 text-white p-4 shadow-lg flex justify-between items-center\">\n//             <h1 className=\"text-2xl font-bold text-teal-400\">üõ°Ô∏è SecureAid</h1>\n//             {account && (\n//                 <div className=\"text-sm bg-gray-700 px-3 py-1 rounded-full\">\n//                     Connected: {account.slice(0, 6)}...{account.slice(-4)}\n//                 </div>\n//             )}\n//         </header>\n//     );\n\n//     const Stats = () => (\n//         <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n//             <div className=\"bg-gray-800 p-6 rounded-lg text-center shadow-md\">\n//                 <h3 className=\"text-lg text-gray-400 mb-2\">Total Donations Raised</h3>\n//                 <p className=\"text-4xl font-bold text-teal-400\">{parseFloat(totalDonations).toFixed(4)} ETH</p>\n//             </div>\n//             <div className=\"bg-gray-800 p-6 rounded-lg text-center shadow-md\">\n//                 <h3 className=\"text-lg text-gray-400 mb-2\">Total Unique Donors</h3>\n//                 <p className=\"text-4xl font-bold text-white\">{donorCount}</p>\n//             </div>\n//             <div className=\"bg-gray-800 p-6 rounded-lg text-center shadow-md\">\n//                 <h3 className=\"text-lg text-gray-400 mb-2\">Current Contract Balance</h3>\n//                 <p className=\"text-4xl font-bold text-green-400\">{parseFloat(contractBalance).toFixed(4)} ETH</p>\n//             </div>\n//         </div>\n//     );\n\n//     const Tabs = () => (\n//         <div className=\"mb-8 flex justify-center border-b border-gray-700\">\n//             <button onClick={() => setActiveTab('donate')} className={`px-6 py-3 font-semibold ${activeTab === 'donate' ? 'text-teal-400 border-b-2 border-teal-400' : 'text-gray-400'}`}>\n//                 Donate\n//             </button>\n//             {isAdmin && (\n//                 <button onClick={() => setActiveTab('admin')} className={`px-6 py-3 font-semibold ${activeTab === 'admin' ? 'text-teal-400 border-b-2 border-teal-400' : 'text-gray-400'}`}>\n//                     Admin Panel\n//                 </button>\n//             )}\n//         </div>\n//     );\n\n//     const DonateForm = () => (\n//         <form onSubmit={handleDonate} className=\"space-y-4 max-w-lg mx-auto\">\n//             <input name=\"donorName\" type=\"text\" value={formData.donorName} onChange={handleInputChange} placeholder=\"Your Name\" className=\"w-full p-3 bg-gray-800 rounded-md border border-gray-700 focus:outline-none focus:ring-2 focus:ring-teal-400\" />\n//             <input name=\"donationAmount\" type=\"text\" value={formData.donationAmount} onChange={handleInputChange} placeholder=\"Amount in ETH (e.g., 0.1)\" className=\"w-full p-3 bg-gray-800 rounded-md border border-gray-700 focus:outline-none focus:ring-2 focus:ring-teal-400\" />\n//             <textarea name=\"donorMessage\" value={formData.donorMessage} onChange={handleInputChange} placeholder=\"Leave a message (optional)\" className=\"w-full p-3 bg-gray-800 rounded-md border border-gray-700 focus:outline-none focus:ring-2 focus:ring-teal-400\" rows=\"3\"></textarea>\n//             <button type=\"submit\" disabled={loading} className=\"w-full bg-teal-500 hover:bg-teal-600 text-white font-bold py-3 px-4 rounded-md transition duration-300 disabled:bg-gray-500\">\n//                 {loading ? 'Processing...' : 'Donate Now'}\n//             </button>\n//         </form>\n//     );\n\n//     const AdminPanel = () => (\n//         <form onSubmit={handleWithdraw} className=\"space-y-4 max-w-lg mx-auto\">\n//             <h2 className=\"text-xl font-bold text-center\">Admin Controls</h2>\n//             <input name=\"withdrawAddress\" type=\"text\" value={formData.withdrawAddress} onChange={handleInputChange} placeholder=\"Recipient Address\" className=\"w-full p-3 bg-gray-800 rounded-md border border-gray-700 focus:outline-none focus:ring-2 focus:ring-green-400\" />\n//             <input name=\"withdrawAmount\" type=\"text\" value={formData.withdrawAmount} onChange={handleInputChange} placeholder=\"Amount in ETH\" className=\"w-full p-3 bg-gray-800 rounded-md border border-gray-700 focus:outline-none focus:ring-2 focus:ring-green-400\" />\n//             <button type=\"submit\" disabled={loading} className=\"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-md transition duration-300 disabled:bg-gray-500\">\n//                 {loading ? 'Processing...' : 'Withdraw Funds'}\n//             </button>\n//         </form>\n//     );\n\n//     const TransactionHistory = () => (\n//         <div className=\"mt-12\">\n//             <h2 className=\"text-2xl font-bold text-center mb-6\">Live Transaction History</h2>\n//             <div className=\"max-w-4xl mx-auto bg-gray-800 rounded-lg shadow-lg p-4\">\n//                 <div className=\"space-y-4\">\n//                     {donors.length > 0 ? donors.map((donor, index) => (\n//                         <div key={index} className=\"bg-gray-700 p-4 rounded-md flex justify-between items-start\">\n//                             <div>\n//                                 <p className=\"font-bold text-teal-400\">{donor.name} <span className=\"text-gray-400 font-normal\">donated</span> {donor.amount} ETH</p>\n//                                 <p className=\"text-sm text-gray-300 mt-1\">\"{donor.message || 'No message'}\"</p>\n//                                 <p className=\"text-xs text-gray-500 mt-2\">From: {donor.donorAddress}</p>\n//                             </div>\n//                             <div className=\"text-right text-xs text-gray-400\">\n//                                 {new Date(donor.timestamp).toLocaleString()}\n//                                 <a href={`https://etherscan.io/tx/${donor.transactionHash}`} target=\"_blank\" rel=\"noopener noreferrer\" className=\"block text-teal-500 hover:underline mt-1\">View on Etherscan</a>\n//                             </div>\n//                         </div>\n//                     )) : (\n//                         <p className=\"text-center text-gray-400 py-4\">No donations yet. Be the first!</p>\n//                     )}\n//                 </div>\n//             </div>\n//         </div>\n//     );\n\n//     return (\n//         <div className=\"bg-gray-900 text-white min-h-screen font-sans\">\n//             <Header />\n//             <main className=\"container mx-auto p-4 md:p-8\">\n//                 {error && <div className=\"bg-red-500 text-white p-3 rounded-md mb-4 text-center\">{error}</div>}\n//                 {successMessage && <div className=\"bg-green-500 text-white p-3 rounded-md mb-4 text-center\">{successMessage}</div>}\n\n//                 <Stats />\n//                 <Tabs />\n\n//                 <div className=\"mt-8\">\n//                     {activeTab === 'donate' ? <DonateForm /> : null}\n//                     {activeTab === 'admin' && isAdmin ? <AdminPanel /> : null}\n//                 </div>\n\n//                 <TransactionHistory />\n//             </main>\n//         </div>\n//     );\n// };\n\n// export default App;\n\n// import React, { useState, useEffect, useCallback } from 'react';\n// import { ethers } from 'ethers';\n// import axios from 'axios';\n\n// // --- IMPORTANT: CONFIGURE YOUR CONTRACT HERE ---\n// const contractAddress = \"0x78DF59611e694495DF4859d1be817211Dc49dA72\"; \n// const contractABI = [\n//     {\n//       \"inputs\": [],\n//       \"stateMutability\": \"nonpayable\",\n//       \"type\": \"constructor\"\n//     },\n//     {\n//       \"anonymous\": false,\n//       \"inputs\": [\n//         {\n//           \"indexed\": true,\n//           \"internalType\": \"address\",\n//           \"name\": \"donor\",\n//           \"type\": \"address\"\n//         },\n//         {\n//           \"indexed\": false,\n//           \"internalType\": \"uint256\",\n//           \"name\": \"amount\",\n//           \"type\": \"uint256\"\n//         },\n//         {\n//           \"indexed\": false,\n//           \"internalType\": \"uint256\",\n//           \"name\": \"timestamp\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"name\": \"DonationReceived\",\n//       \"type\": \"event\"\n//     },\n//     {\n//       \"anonymous\": false,\n//       \"inputs\": [\n//         {\n//           \"indexed\": true,\n//           \"internalType\": \"address\",\n//           \"name\": \"to\",\n//           \"type\": \"address\"\n//         },\n//         {\n//           \"indexed\": false,\n//           \"internalType\": \"uint256\",\n//           \"name\": \"amount\",\n//           \"type\": \"uint256\"\n//         },\n//         {\n//           \"indexed\": false,\n//           \"internalType\": \"uint256\",\n//           \"name\": \"timestamp\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"name\": \"Withdrawal\",\n//       \"type\": \"event\"\n//     },\n//     {\n//       \"inputs\": [],\n//       \"name\": \"donorCount\",\n//       \"outputs\": [\n//         {\n//           \"internalType\": \"uint256\",\n//           \"name\": \"\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"stateMutability\": \"view\",\n//       \"type\": \"function\",\n//       \"constant\": true\n//     },\n//     {\n//       \"inputs\": [\n//         {\n//           \"internalType\": \"address\",\n//           \"name\": \"\",\n//           \"type\": \"address\"\n//         }\n//       ],\n//       \"name\": \"donors\",\n//       \"outputs\": [\n//         {\n//           \"internalType\": \"uint256\",\n//           \"name\": \"\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"stateMutability\": \"view\",\n//       \"type\": \"function\",\n//       \"constant\": true\n//     },\n//     {\n//       \"inputs\": [],\n//       \"name\": \"owner\",\n//       \"outputs\": [\n//         {\n//           \"internalType\": \"address\",\n//           \"name\": \"\",\n//           \"type\": \"address\"\n//         }\n//       ],\n//       \"stateMutability\": \"view\",\n//       \"type\": \"function\",\n//       \"constant\": true\n//     },\n//     {\n//       \"inputs\": [],\n//       \"name\": \"totalDonations\",\n//       \"outputs\": [\n//         {\n//           \"internalType\": \"uint256\",\n//           \"name\": \"\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"stateMutability\": \"view\",\n//       \"type\": \"function\",\n//       \"constant\": true\n//     },\n//     {\n//       \"inputs\": [],\n//       \"name\": \"donate\",\n//       \"outputs\": [],\n//       \"stateMutability\": \"payable\",\n//       \"type\": \"function\",\n//       \"payable\": true\n//     },\n//     {\n//       \"inputs\": [\n//         {\n//           \"internalType\": \"address payable\",\n//           \"name\": \"_to\",\n//           \"type\": \"address\"\n//         },\n//         {\n//           \"internalType\": \"uint256\",\n//           \"name\": \"_amount\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"name\": \"withdraw\",\n//       \"outputs\": [],\n//       \"stateMutability\": \"nonpayable\",\n//       \"type\": \"function\"\n//     },\n//     {\n//       \"inputs\": [],\n//       \"name\": \"getContractBalance\",\n//       \"outputs\": [\n//         {\n//           \"internalType\": \"uint256\",\n//           \"name\": \"\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"stateMutability\": \"view\",\n//       \"type\": \"function\",\n//       \"constant\": true\n//     },\n//     {\n//       \"inputs\": [],\n//       \"name\": \"getDonorCount\",\n//       \"outputs\": [\n//         {\n//           \"internalType\": \"uint256\",\n//           \"name\": \"\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"stateMutability\": \"view\",\n//       \"type\": \"function\",\n//       \"constant\": true\n//     }\n//   ];\n\n// const App = () => {\n//     // State variables\n//     const [provider, setProvider] = useState(null);\n//     const [signer, setSigner] = useState(null);\n//     const [contract, setContract] = useState(null);\n//     const [account, setAccount] = useState(null);\n//     const [isOwner, setIsOwner] = useState(false);\n//     const [theme, setTheme] = useState('light');\n\n//     // Data states\n//     const [contractBalance, setContractBalance] = useState('0');\n//     const [totalDonations, setTotalDonations] = useState('0');\n//     const [donorCount, setDonorCount] = useState(0);\n//     const [transactionHistory, setTransactionHistory] = useState([]);\n\n//     // Form states (FIXED: Using objects to manage forms)\n//     const [donationForm, setDonationForm] = useState({ name: '', message: '', amount: '' });\n//     const [withdrawForm, setWithdrawForm] = useState({ to: '', amount: '' });\n\n//     // UI states\n//     const [error, setError] = useState('');\n//     const [success, setSuccess] = useState('');\n//     const [loading, setLoading] = useState(false);\n\n//     // --- Effects ---\n\n//     useEffect(() => {\n//         // Initialize theme based on localStorage or system preference\n//         if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {\n//             document.documentElement.classList.add('dark');\n//             setTheme('dark');\n//         } else {\n//             document.documentElement.classList.remove('dark');\n//             setTheme('light');\n//         }\n//         initWeb3();\n//     }, []);\n\n//     const fetchContractData = useCallback(async (currentContract) => {\n//         if (!currentContract) return;\n//         console.log(\"Attempting to fetch contract data...\");\n//         try {\n//             const balance = await currentContract.provider.getBalance(currentContract.address);\n//             setContractBalance(ethers.utils.formatEther(balance));\n\n//             const totalDonationsWei = await currentContract.totalDonations();\n//             setTotalDonations(ethers.utils.formatEther(totalDonationsWei));\n\n//             const count = await currentContract.getDonorCount();\n//             setDonorCount(count.toNumber());\n//             console.log(\"‚úÖ Contract data fetched successfully.\");\n//         } catch (err) {\n//             console.error(\"Error fetching contract data:\", err);\n//             setError(\"Could not fetch data from smart contract. Did you deploy it and update the address/ABI?\");\n//         }\n//     }, []);\n\n//     const fetchDonorHistory = useCallback(async () => {\n//         console.log(\"Attempting to fetch donor history from backend...\");\n//         try {\n//             const response = await axios.get('http://localhost:5001/api/donors');\n//             setTransactionHistory(response.data);\n//             console.log(\"‚úÖ Donor history fetched successfully.\");\n//         } catch (err) {\n//             console.error(\"Error fetching donor history:\", err);\n//             setError(\"Could not fetch transaction history. Is the backend server running?\");\n//         }\n//     }, []);\n\n//     useEffect(() => {\n//         if (contract) {\n//             fetchContractData(contract);\n//             fetchDonorHistory();\n//         }\n//     }, [contract, fetchContractData, fetchDonorHistory]);\n\n//     // --- Functions ---\n//     const initWeb3 = async () => {\n//         if (window.ethereum) {\n//             try {\n//                 const web3Provider = new ethers.providers.Web3Provider(window.ethereum);\n//                 const web3Signer = web3Provider.getSigner();\n//                 const donationContract = new ethers.Contract(contractAddress, contractABI, web3Signer);\n\n//                 setProvider(web3Provider);\n//                 setSigner(web3Signer);\n//                 setContract(donationContract);\n\n//                 const accounts = await window.ethereum.request({ method: 'eth_accounts' });\n//                 if (accounts.length > 0) {\n//                     setAccount(accounts[0]);\n//                     checkIfOwner(donationContract, accounts[0]);\n//                 }\n\n//                 window.ethereum.on('accountsChanged', (accounts) => {\n//                     const newAccount = accounts.length > 0 ? accounts[0] : null;\n//                     setAccount(newAccount);\n//                     if(newAccount && donationContract) {\n//                         checkIfOwner(donationContract, newAccount);\n//                     } else {\n//                         setIsOwner(false);\n//                     }\n//                 });\n\n//             } catch (err) {\n//                 console.error(\"Error initializing Web3:\", err);\n//                 setError(\"Could not initialize. Is MetaMask installed & configured?\");\n//             }\n//         } else {\n//             setError(\"Please install MetaMask to use this application.\");\n//         }\n//     };\n\n//     const connectWallet = async () => {\n//         try {\n//             const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n//             setAccount(accounts[0]);\n//         } catch (err) {\n//             console.error(\"Error connecting wallet:\", err);\n//             setError(\"Failed to connect wallet.\");\n//         }\n//     };\n\n//     const checkIfOwner = async (contractInstance, currentAccount) => {\n//         try {\n//             const ownerAddress = await contractInstance.owner();\n//             setIsOwner(ownerAddress.toLowerCase() === currentAccount.toLowerCase());\n//         } catch (err) { console.error(\"Could not check owner status:\", err); }\n//     };\n\n//     // FIX: Generic handler to update form state objects\n//     const handleFormChange = (e, formSetter) => {\n//         formSetter(prev => ({ ...prev, [e.target.name]: e.target.value }));\n//     };\n\n//     const handleDonate = async (e) => {\n//         e.preventDefault();\n//         if (!donationForm.amount || isNaN(donationForm.amount) || parseFloat(donationForm.amount) <= 0) return setError(\"Please enter a valid amount.\");\n\n//         setError(''); setSuccess(''); setLoading(true);\n//         try {\n//             const tx = await contract.donate({ value: ethers.utils.parseEther(donationForm.amount) });\n//             await tx.wait();\n//             await axios.post('http://localhost:5001/api/donors', { name: donationForm.name || \"Anonymous\", message: donationForm.message || \"No message\", amount: parseFloat(donationForm.amount), address: account, txHash: tx.hash });\n//             setSuccess(`Thank you for your donation of ${donationForm.amount} ETH!`);\n//             setDonationForm({ name: '', message: '', amount: '' }); // Reset form\n//             fetchContractData(contract);\n//             fetchDonorHistory();\n//         } catch (err) {\n//             console.error(\"Donation Error:\", err);\n//             setError(err.reason || \"Donation failed. Check console for details.\");\n//         } finally {\n//             setLoading(false);\n//         }\n//     };\n\n//     const handleWithdraw = async (e) => {\n//         e.preventDefault();\n//         if (!ethers.utils.isAddress(withdrawForm.to)) return setError(\"Invalid recipient address.\");\n//         if (!withdrawForm.amount || isNaN(withdrawForm.amount) || parseFloat(withdrawForm.amount) <= 0) return setError(\"Invalid amount.\");\n\n//         setError(''); setSuccess(''); setLoading(true);\n//         try {\n//             const tx = await contract.withdraw(withdrawForm.to, ethers.utils.parseEther(withdrawForm.amount));\n//             await tx.wait();\n//             setSuccess(`Successfully withdrew ${withdrawForm.amount} ETH.`);\n//             setWithdrawForm({ to: '', amount: '' }); // Reset form\n//             fetchContractData(contract);\n//         } catch (err) {\n//             console.error(\"Withdrawal Error:\", err);\n//             setError(err.reason || \"Withdrawal failed. Check console for details.\");\n//         } finally {\n//             setLoading(false);\n//         }\n//     };\n\n//     // NEW: Function to toggle between light and dark themes\n//     const toggleTheme = () => {\n//         const newTheme = theme === 'light' ? 'dark' : 'light';\n//         setTheme(newTheme);\n//         localStorage.setItem('theme', newTheme);\n//         document.documentElement.classList.toggle('dark', newTheme === 'dark');\n//     };\n\n//     return (\n//         <div className=\"min-h-screen bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200 transition-colors duration-300\">\n//             {/* Header */}\n//             <header className=\"bg-white dark:bg-gray-800 shadow-md sticky top-0 z-10\">\n//                 <div className=\"container mx-auto px-6 py-4 flex justify-between items-center\">\n//                     <h1 className=\"text-3xl font-bold\">SecureAid</h1>\n//                     <div className=\"flex items-center space-x-4\">\n//                         <button onClick={toggleTheme} className=\"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-2xl\">\n//                              {theme === 'light' ? 'üåô' : '‚òÄÔ∏è'}\n//                         </button>\n//                         {account ? (\n//                             <div className=\"text-sm font-mono bg-gray-100 dark:bg-gray-700 p-2 rounded-md\">\n//                                 {`${account.substring(0, 6)}...${account.substring(account.length - 4)}`}\n//                             </div>\n//                         ) : (\n//                             <button onClick={connectWallet} className=\"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300\">\n//                                 Connect Wallet\n//                             </button>\n//                         )}\n//                     </div>\n//                 </div>\n//             </header>\n\n//             <main className=\"container mx-auto px-6 py-8\">\n//                 {error && <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative mb-6\" role=\"alert\">{error}</div>}\n//                 {success && <div className=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg relative mb-6\" role=\"alert\">{success}</div>}\n\n//                 {/* Stats */}\n//                 <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n//                     <StatCard title=\"Total Funds Raised\" value={`${parseFloat(totalDonations).toFixed(4)} ETH`} color=\"text-blue-500\" />\n//                     <StatCard title=\"Contract Balance\" value={`${parseFloat(contractBalance).toFixed(4)} ETH`} color=\"text-green-500\" />\n//                     <StatCard title=\"Total Unique Donors\" value={donorCount} color=\"text-purple-500\" />\n//                 </div>\n\n//                 <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start\">\n//                     {/* Donation Form */}\n//                     <FormCard title=\"Make a Donation\" onSubmit={handleDonate}>\n//                         <InputField name=\"name\" placeholder=\"Your Name (Optional)\" value={donationForm.name} onChange={e => handleFormChange(e, setDonationForm)} />\n//                         <InputField name=\"message\" placeholder=\"A brief message (Optional)\" value={donationForm.message} onChange={e => handleFormChange(e, setDonationForm)} isTextArea />\n//                         <InputField name=\"amount\" placeholder=\"Amount in ETH (e.g., 0.1)\" value={donationForm.amount} onChange={e => handleFormChange(e, setDonationForm)} required />\n//                         <button type=\"submit\" disabled={!account || loading} className=\"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg transition duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600\">\n//                             {loading ? 'Processing...' : 'Donate Now'}\n//                         </button>\n//                     </FormCard>\n\n//                     {/* Transaction History */}\n//                     <div className=\"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-lg\">\n//                         <h2 className=\"text-2xl font-bold mb-6\">Live Transaction History</h2>\n//                         <div className=\"space-y-4 max-h-96 overflow-y-auto\">\n//                             {transactionHistory.length > 0 ? transactionHistory.map((tx) => (\n//                                 <div key={tx._id} className=\"border-b border-gray-200 dark:border-gray-700 pb-4 last:border-b-0\">\n//                                     <p><span className=\"font-bold text-blue-500\">{tx.name}</span> donated <span className=\"font-bold\">{tx.amount} ETH</span></p>\n//                                     <p className=\"text-gray-600 dark:text-gray-400 italic\">\"{tx.message}\"</p>\n//                                     <p className=\"text-sm text-gray-500 font-mono mt-1\">{`From: ${tx.address.substring(0, 10)}...`}</p>\n//                                 </div>\n//                             )) : <p className=\"text-gray-500\">No donations recorded yet.</p>}\n//                         </div>\n//                     </div>\n//                 </div>\n\n//                 {/* Admin Panel */}\n//                 {isOwner && (\n//                     <div className=\"mt-8\">\n//                         <FormCard title=\"Admin Panel\" onSubmit={handleWithdraw}>\n//                              <InputField name=\"to\" placeholder=\"Recipient Address\" value={withdrawForm.to} onChange={e => handleFormChange(e, setWithdrawForm)} required />\n//                              <InputField name=\"amount\" placeholder=\"Amount to Withdraw (ETH)\" value={withdrawForm.amount} onChange={e => handleFormChange(e, setWithdrawForm)} required />\n//                              <button type=\"submit\" disabled={loading} className=\"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-4 rounded-lg transition duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600\">\n//                                 {loading ? 'Processing...' : 'Withdraw Funds'}\n//                             </button>\n//                         </FormCard>\n//                     </div>\n//                 )}\n//             </main>\n//         </div>\n//     );\n// };\n\n// // --- Helper Components ---\n// const StatCard = ({ title, value, color }) => (\n//     <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg text-center\">\n//         <h3 className=\"text-lg font-semibold text-gray-600 dark:text-gray-400\">{title}</h3>\n//         <p className={`text-4xl font-bold mt-2 ${color}`}>{value}</p>\n//     </div>\n// );\n\n// const FormCard = ({ title, onSubmit, children }) => (\n//     <div className=\"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-lg\">\n//         <h2 className={`text-2xl font-bold mb-6 ${title.includes(\"Admin\") ? 'text-red-500' : ''}`}>{title}</h2>\n//         <form onSubmit={onSubmit} className=\"space-y-4\">{children}</form>\n//     </div>\n// );\n\n// const InputField = ({ name, placeholder, value, onChange, isTextArea = false, required = false }) => {\n//     const commonProps = {\n//         name,\n//         placeholder,\n//         value,\n//         onChange,\n//         required,\n//         className: \"shadow-sm appearance-none border border-gray-300 dark:border-gray-600 rounded-lg w-full py-3 px-4 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500\"\n//     };\n//     return isTextArea ? <textarea {...commonProps} rows=\"3\" /> : <input type=\"text\" {...commonProps} />;\n// };\n\n// export default App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8;\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"StatCard\");\n$RefreshReg$(_c3, \"TabButton\");\n$RefreshReg$(_c4, \"Input\");\n$RefreshReg$(_c5, \"Textarea\");\n$RefreshReg$(_c6, \"DonateForm\");\n$RefreshReg$(_c7, \"AdminPanel\");\n$RefreshReg$(_c8, \"TransactionHistory\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","ethers","axios","jsxDEV","_jsxDEV","contractAddress","contractABI","App","_s","account","setAccount","provider","setProvider","signer","setSigner","contract","setContract","isAdmin","setIsAdmin","totalDonations","setTotalDonations","contractBalance","setContractBalance","donorCount","setDonorCount","donors","setDonors","formData","setFormData","donationAmount","donorName","donorMessage","withdrawAmount","withdrawAddress","loading","setLoading","error","setError","successMessage","setSuccessMessage","activeTab","setActiveTab","theme","setTheme","handleInputChange","e","name","value","target","prev","toggleTheme","newTheme","localStorage","setItem","document","documentElement","classList","toggle","fetchContractData","currentContract","console","log","total","balance","getContractBalance","count","getDonorCount","utils","formatEther","toNumber","err","fetchDonorsFromDB","response","get","data","sort","a","b","Date","timestamp","window","matchMedia","matches","add","remove","init","ethereum","web3Provider","providers","Web3Provider","web3Signer","getSigner","accounts","send","donationContract","Contract","owner","toLowerCase","on","location","reload","handleDonate","preventDefault","isNaN","amountInWei","parseEther","gasPrice","getGasPrice","tx","connect","donate","receipt","wait","post","donorAddress","message","amount","transactionHash","slice","handleWithdraw","isAddress","withdraw","reason","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","role","StatCard","title","parseFloat","toFixed","color","TabButton","DonateForm","AdminPanel","TransactionHistory","_c","_c2","_c3","Input","type","onChange","placeholder","required","_c4","Textarea","rows","_c5","onSubmit","disabled","_c6","_c7","length","map","donor","toLocaleString","href","rel","_id","_c8","$RefreshReg$"],"sources":["/Users/bijaythapa/Desktop/secure-aid/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { ethers } from 'ethers';\nimport axios from 'axios';\n\n// --- IMPORTANT CONFIGURATION ---\n// This is your working configuration.\nconst contractAddress = \"0x78DF59611e694495DF4859d1be817211Dc49dA72\"; \nconst contractABI = [\n    {\n      \"inputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"constructor\"\n    },\n    {\n      \"anonymous\": false,\n      \"inputs\": [\n        {\n          \"indexed\": true,\n          \"internalType\": \"address\",\n          \"name\": \"donor\",\n          \"type\": \"address\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"uint256\",\n          \"name\": \"amount\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"uint256\",\n          \"name\": \"timestamp\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"DonationReceived\",\n      \"type\": \"event\"\n    },\n    {\n      \"anonymous\": false,\n      \"inputs\": [\n        {\n          \"indexed\": true,\n          \"internalType\": \"address\",\n          \"name\": \"to\",\n          \"type\": \"address\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"uint256\",\n          \"name\": \"amount\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"uint256\",\n          \"name\": \"timestamp\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"Withdrawal\",\n      \"type\": \"event\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"donorCount\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\",\n      \"constant\": true\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"\",\n          \"type\": \"address\"\n        }\n      ],\n      \"name\": \"donors\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\",\n      \"constant\": true\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"owner\",\n      \"outputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"\",\n          \"type\": \"address\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\",\n      \"constant\": true\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"totalDonations\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\",\n      \"constant\": true\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"donate\",\n      \"outputs\": [],\n      \"stateMutability\": \"payable\",\n      \"type\": \"function\",\n      \"payable\": true\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address payable\",\n          \"name\": \"_to\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"_amount\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"withdraw\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"getContractBalance\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\",\n      \"constant\": true\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"getDonorCount\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\",\n      \"constant\": true\n    }\n  ];\n// --- END CONFIGURATION ---\n\nconst App = () => {\n    const [account, setAccount] = useState(null);\n    const [provider, setProvider] = useState(null);\n    const [signer, setSigner] = useState(null);\n    const [contract, setContract] = useState(null);\n    const [isAdmin, setIsAdmin] = useState(false);\n    const [totalDonations, setTotalDonations] = useState('0');\n    const [contractBalance, setContractBalance] = useState('0');\n    const [donorCount, setDonorCount] = useState(0);\n    const [donors, setDonors] = useState([]);\n    \n    // FIX for single-character bug: All form fields are in one state object.\n    const [formData, setFormData] = useState({\n        donationAmount: '',\n        donorName: '',\n        donorMessage: '',\n        withdrawAmount: '',\n        withdrawAddress: ''\n    });\n\n    // UI State\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState('');\n    const [successMessage, setSuccessMessage] = useState('');\n    const [activeTab, setActiveTab] = useState('donate');\n    // NEW: State for theme management\n    const [theme, setTheme] = useState('light');\n\n    // FIX for input fields: A single handler updates the formData state object.\n    const handleInputChange = (e) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({ ...prev, [name]: value }));\n    };\n    \n    // NEW: Function to toggle theme and save preference\n    const toggleTheme = () => {\n        const newTheme = theme === 'light' ? 'dark' : 'light';\n        setTheme(newTheme);\n        localStorage.setItem('theme', newTheme);\n        document.documentElement.classList.toggle('dark', newTheme === 'dark');\n    };\n\n    // --- Data Fetching and Initialization ---\n\n    const fetchContractData = useCallback(async (currentContract) => {\n        if (!currentContract) return;\n        try {\n            console.log(\"Attempting to fetch contract data...\");\n            const total = await currentContract.totalDonations();\n            const balance = await currentContract.getContractBalance();\n            const count = await currentContract.getDonorCount();\n\n            setTotalDonations(ethers.utils.formatEther(total));\n            setContractBalance(ethers.utils.formatEther(balance));\n            setDonorCount(count.toNumber());\n            console.log(\"‚úÖ Contract data fetched successfully.\");\n            setError(''); \n        } catch (err) {\n            console.error(\"‚ùå Error fetching smart contract data:\", err);\n            setError('Could not fetch data. Please follow the README troubleshooting steps.');\n        }\n    }, []);\n\n    const fetchDonorsFromDB = useCallback(async () => {\n        try {\n            console.log(\"Attempting to fetch donor history from backend...\");\n            const response = await axios.get('http://localhost:5001/api/donors');\n            setDonors(response.data.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp)));\n            console.log(\"‚úÖ Donor history fetched successfully.\");\n        } catch (err) {\n            console.error(\"‚ùå Error fetching donors from the database:\", err);\n            setError('Could not fetch transaction history. Is the backend server running?');\n        }\n    }, []);\n\n    // This useEffect runs once on mount to initialize everything.\n    useEffect(() => {\n        // NEW: Set initial theme from localStorage or system preference\n        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {\n            document.documentElement.classList.add('dark');\n            setTheme('dark');\n        } else {\n            document.documentElement.classList.remove('dark');\n            setTheme('light');\n        }\n\n        const init = async () => {\n            setError('');\n            if (window.ethereum) {\n                try {\n                    const web3Provider = new ethers.providers.Web3Provider(window.ethereum);\n                    const web3Signer = web3Provider.getSigner();\n                    const accounts = await web3Provider.send('eth_requestAccounts', []);\n                    \n                    const donationContract = new ethers.Contract(contractAddress, contractABI, web3Signer);\n\n                    setProvider(web3Provider);\n                    setSigner(web3Signer);\n                    setAccount(accounts[0]);\n                    setContract(donationContract);\n                    \n                    const owner = await donationContract.owner();\n                    setIsAdmin(accounts[0].toLowerCase() === owner.toLowerCase());\n\n                    await fetchContractData(donationContract);\n                    await fetchDonorsFromDB();\n\n                } catch (err) {\n                    console.error(\"‚ùå Error during initialization:\", err);\n                    setError(\"Failed to initialize. Please connect to MetaMask and follow the README troubleshooting guide.\");\n                }\n            } else {\n                setError(\"MetaMask is not installed. Please install it to use this dApp.\");\n            }\n        };\n        \n        init();\n\n        if(window.ethereum) {\n            window.ethereum.on('accountsChanged', () => window.location.reload());\n            window.ethereum.on('chainChanged', () => window.location.reload());\n        }\n    }, [fetchContractData, fetchDonorsFromDB]);\n\n    // --- Core Functions (Donation & Withdrawal) ---\n\n    const handleDonate = async (e) => {\n        e.preventDefault();\n        const { donationAmount, donorName, donorMessage } = formData;\n\n        if (!donationAmount || isNaN(donationAmount) || donationAmount <= 0 || !donorName) {\n            setError(\"Please enter a valid name and donation amount.\");\n            return;\n        }\n        if (!contract || !signer || !provider) {\n            setError(\"Application not properly connected. Please refresh.\");\n            return;\n        }\n\n        setLoading(true);\n        setError('');\n        setSuccessMessage('');\n\n        try {\n            const amountInWei = ethers.utils.parseEther(donationAmount);\n            const gasPrice = await provider.getGasPrice();\n            const tx = await contract.connect(signer).donate({ value: amountInWei, gasPrice: gasPrice });\n            \n            setSuccessMessage(\"Processing donation... waiting for blockchain confirmation.\");\n            const receipt = await tx.wait();\n\n            await axios.post('http://localhost:5001/api/donors', {\n                donorAddress: account, name: donorName, message: donorMessage, amount: donationAmount, transactionHash: receipt.transactionHash,\n            });\n            \n            setSuccessMessage(`Donation successful! Thank you! TX: ${receipt.transactionHash.slice(0, 6)}...${receipt.transactionHash.slice(-4)}`);\n            setFormData(prev => ({ ...prev, donorName: '', donationAmount: '', donorMessage: ''}));\n            \n            await fetchContractData(contract);\n            await fetchDonorsFromDB();\n\n        } catch (err) {\n            console.error(\"Donation Error:\", err);\n            // setError(err.reason || \"Transaction failed. Please reset your MetaMask account (see README) and try again.\");\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleWithdraw = async (e) => {\n        e.preventDefault();\n        const { withdrawAmount, withdrawAddress } = formData;\n        if (!withdrawAmount || isNaN(withdrawAmount) || withdrawAmount <= 0 || !withdrawAddress) {\n            setError(\"Please enter a valid amount and address.\");\n            return;\n        }\n        if (!ethers.utils.isAddress(withdrawAddress)) {\n            setError(\"Invalid recipient address.\");\n            return;\n        }\n\n        setLoading(true);\n        setError('');\n        setSuccessMessage('');\n\n        try {\n            const amountInWei = ethers.utils.parseEther(withdrawAmount);\n            const gasPrice = await provider.getGasPrice();\n            const tx = await contract.connect(signer).withdraw(withdrawAddress, amountInWei, { gasPrice: gasPrice });\n\n            await tx.wait();\n            setSuccessMessage(\"Withdrawal successful!\");\n            await fetchContractData(contract);\n            \n        } catch (err) {\n            console.error(\"Withdrawal Error:\", err);\n            setError(err.reason || \"Withdrawal failed. Please reset your MetaMask account and try again.\");\n        } finally {\n            setLoading(false);\n        }\n    };\n    \n    // --- UI Components ---\n    return (\n        <div className=\"bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-white min-h-screen font-sans transition-colors duration-300\">\n            {/* Header with Theme Toggle */}\n            <header className=\"bg-white dark:bg-gray-800 shadow-lg p-4 flex justify-between items-center sticky top-0 z-10\">\n                <h1 className=\"text-2xl font-bold text-teal-500 dark:text-teal-400\">üõ°Ô∏è SecureAid</h1>\n                <div className=\"flex items-center space-x-4\">\n                    <button onClick={toggleTheme} className=\"text-2xl p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700\">\n                        {theme === 'light' ? 'üåô' : '‚òÄÔ∏è'}\n                    </button>\n                    {account && (\n                        <div className=\"text-sm bg-gray-200 dark:bg-gray-700 px-3 py-1 rounded-full\">\n                            Connected: {account.slice(0, 6)}...{account.slice(-4)}\n                        </div>\n                    )}\n                </div>\n            </header>\n\n            <main className=\"container mx-auto p-4 md:p-8\">\n                {error && <div className=\"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md mb-4\" role=\"alert\">{error}</div>}\n                {successMessage && <div className=\"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-md mb-4\" role=\"alert\">{successMessage}</div>}\n                \n                {/* Stats */}\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n                    <StatCard title=\"Total Donations Raised\" value={`${parseFloat(totalDonations).toFixed(4)} ETH`} color=\"text-teal-500 dark:text-teal-400\" />\n                    <StatCard title=\"Total Unique Donors\" value={donorCount} color=\"text-gray-800 dark:text-white\" />\n                    <StatCard title=\"Current Contract Balance\" value={`${parseFloat(contractBalance).toFixed(4)} ETH`} color=\"text-green-500 dark:text-green-400\" />\n                </div>\n                \n                {/* Tabs */}\n                <div className=\"mb-8 flex justify-center border-b border-gray-200 dark:border-gray-700\">\n                    <TabButton name=\"donate\" activeTab={activeTab} setActiveTab={setActiveTab}>Donate</TabButton>\n                    {isAdmin && <TabButton name=\"admin\" activeTab={activeTab} setActiveTab={setActiveTab}>Admin Panel</TabButton>}\n                </div>\n\n                {/* Forms */}\n                <div className=\"mt-8 bg-white dark:bg-gray-800 p-8 rounded-xl shadow-2xl max-w-2xl mx-auto\">\n                    {activeTab === 'donate' ? <DonateForm formData={formData} handleInputChange={handleInputChange} handleDonate={handleDonate} loading={loading} /> : null}\n                    {activeTab === 'admin' && isAdmin ? <AdminPanel formData={formData} handleInputChange={handleInputChange} handleWithdraw={handleWithdraw} loading={loading} /> : null}\n                </div>\n                \n                {/* Transaction History */}\n                <TransactionHistory donors={donors} />\n            </main>\n        </div>\n    );\n};\n\n// --- Helper Components ---\n\nconst StatCard = ({ title, value, color }) => (\n    <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg text-center shadow-lg transition-transform hover:scale-105\">\n        <h3 className=\"text-lg text-gray-500 dark:text-gray-400 mb-2\">{title}</h3>\n        <p className={`text-4xl font-bold ${color}`}>{value}</p>\n    </div>\n);\n\nconst TabButton = ({ name, activeTab, setActiveTab, children }) => (\n    <button onClick={() => setActiveTab(name)} className={`px-6 py-3 font-semibold transition-colors duration-300 ${activeTab === name ? 'text-teal-500 border-b-2 border-teal-500' : 'text-gray-400 hover:text-teal-500'}`}>\n        {children}\n    </button>\n);\n\nconst Input = ({ name, type = \"text\", value, onChange, placeholder }) => (\n    <input name={name} type={type} value={value} onChange={onChange} placeholder={placeholder} className=\"w-full p-3 bg-gray-100 dark:bg-gray-700 rounded-md border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-teal-500\" required />\n);\n\nconst Textarea = ({ name, value, onChange, placeholder }) => (\n    <textarea name={name} value={value} onChange={onChange} placeholder={placeholder} className=\"w-full p-3 bg-gray-100 dark:bg-gray-700 rounded-md border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-teal-500\" rows=\"3\"></textarea>\n);\n\nconst DonateForm = ({ formData, handleInputChange, handleDonate, loading }) => (\n    <form onSubmit={handleDonate} className=\"space-y-4\">\n        <h2 className=\"text-xl font-bold text-center mb-4\">Make Your Contribution</h2>\n        <Input name=\"donorName\" value={formData.donorName} onChange={handleInputChange} placeholder=\"Your Name\" />\n        <Input name=\"donationAmount\" value={formData.donationAmount} onChange={handleInputChange} placeholder=\"Amount in ETH (e.g., 0.1)\" />\n        <Textarea name=\"donorMessage\" value={formData.donorMessage} onChange={handleInputChange} placeholder=\"Leave a message (optional)\" />\n        <button type=\"submit\" disabled={loading} className=\"w-full bg-teal-500 hover:bg-teal-600 text-white font-bold py-3 px-4 rounded-md transition duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600\">\n            {loading ? 'Processing...' : 'Donate Now'}\n        </button>\n    </form>\n);\n\nconst AdminPanel = ({ formData, handleInputChange, handleWithdraw, loading }) => (\n    <form onSubmit={handleWithdraw} className=\"space-y-4\">\n        <h2 className=\"text-xl font-bold text-center text-red-500 mb-4\">Admin Controls</h2>\n        <Input name=\"withdrawAddress\" value={formData.withdrawAddress} onChange={handleInputChange} placeholder=\"Recipient Address\" />\n        <Input name=\"withdrawAmount\" value={formData.withdrawAmount} onChange={handleInputChange} placeholder=\"Amount in ETH\" />\n        <button type=\"submit\" disabled={loading} className=\"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-md transition duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600\">\n            {loading ? 'Processing...' : 'Withdraw Funds'}\n        </button>\n    </form>\n);\n\nconst TransactionHistory = ({ donors }) => (\n    <div className=\"mt-12\">\n        <h2 className=\"text-2xl font-bold text-center mb-6\">Live Transaction History</h2>\n        <div className=\"max-w-4xl mx-auto space-y-4\">\n            {donors.length > 0 ? donors.map((donor) => (\n                <div key={donor._id || donor.transactionHash} className=\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md flex justify-between items-start\">\n                    <div>\n                        <p className=\"font-bold text-teal-500 dark:text-teal-400\">{donor.name} <span className=\"text-gray-500 dark:text-gray-400 font-normal\">donated</span> {donor.amount} ETH</p>\n                        <p className=\"text-sm text-gray-600 dark:text-gray-300 mt-1\">\"{donor.message || 'No message'}\"</p>\n                        <p className=\"text-xs text-gray-400 dark:text-gray-500 mt-2 font-mono\">From: {donor.donorAddress}</p>\n                    </div>\n                    <div className=\"text-right text-xs text-gray-400 dark:text-gray-500\">\n                        {new Date(donor.timestamp).toLocaleString()}\n                        <a href={`https://etherscan.io/tx/${donor.transactionHash}`} target=\"_blank\" rel=\"noopener noreferrer\" className=\"block text-teal-500 hover:underline mt-1\">View on Etherscan</a>\n                    </div>\n                </div>\n            )) : (\n                <div className=\"text-center bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md\"><p className=\"text-gray-400\">No donations yet. Be the first!</p></div>\n            )}\n        </div>\n    </div>\n);\n\nexport default App;\n\n\n\n\n\n\n\n\n// import React, { useState, useEffect, useCallback } from 'react';\n// import { ethers } from 'ethers';\n// import axios from 'axios';\n\n// // --- IMPORTANT CONFIGURATION ---\n// // Remember to follow the README guide to get these values after deploying\n// const contractAddress = \"0x78DF59611e694495DF4859d1be817211Dc49dA72\"; \n// const contractABI = [\n//     {\n//       \"inputs\": [],\n//       \"stateMutability\": \"nonpayable\",\n//       \"type\": \"constructor\"\n//     },\n//     {\n//       \"anonymous\": false,\n//       \"inputs\": [\n//         {\n//           \"indexed\": true,\n//           \"internalType\": \"address\",\n//           \"name\": \"donor\",\n//           \"type\": \"address\"\n//         },\n//         {\n//           \"indexed\": false,\n//           \"internalType\": \"uint256\",\n//           \"name\": \"amount\",\n//           \"type\": \"uint256\"\n//         },\n//         {\n//           \"indexed\": false,\n//           \"internalType\": \"uint256\",\n//           \"name\": \"timestamp\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"name\": \"DonationReceived\",\n//       \"type\": \"event\"\n//     },\n//     {\n//       \"anonymous\": false,\n//       \"inputs\": [\n//         {\n//           \"indexed\": true,\n//           \"internalType\": \"address\",\n//           \"name\": \"to\",\n//           \"type\": \"address\"\n//         },\n//         {\n//           \"indexed\": false,\n//           \"internalType\": \"uint256\",\n//           \"name\": \"amount\",\n//           \"type\": \"uint256\"\n//         },\n//         {\n//           \"indexed\": false,\n//           \"internalType\": \"uint256\",\n//           \"name\": \"timestamp\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"name\": \"Withdrawal\",\n//       \"type\": \"event\"\n//     },\n//     {\n//       \"inputs\": [],\n//       \"name\": \"donorCount\",\n//       \"outputs\": [\n//         {\n//           \"internalType\": \"uint256\",\n//           \"name\": \"\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"stateMutability\": \"view\",\n//       \"type\": \"function\",\n//       \"constant\": true\n//     },\n//     {\n//       \"inputs\": [\n//         {\n//           \"internalType\": \"address\",\n//           \"name\": \"\",\n//           \"type\": \"address\"\n//         }\n//       ],\n//       \"name\": \"donors\",\n//       \"outputs\": [\n//         {\n//           \"internalType\": \"uint256\",\n//           \"name\": \"\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"stateMutability\": \"view\",\n//       \"type\": \"function\",\n//       \"constant\": true\n//     },\n//     {\n//       \"inputs\": [],\n//       \"name\": \"owner\",\n//       \"outputs\": [\n//         {\n//           \"internalType\": \"address\",\n//           \"name\": \"\",\n//           \"type\": \"address\"\n//         }\n//       ],\n//       \"stateMutability\": \"view\",\n//       \"type\": \"function\",\n//       \"constant\": true\n//     },\n//     {\n//       \"inputs\": [],\n//       \"name\": \"totalDonations\",\n//       \"outputs\": [\n//         {\n//           \"internalType\": \"uint256\",\n//           \"name\": \"\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"stateMutability\": \"view\",\n//       \"type\": \"function\",\n//       \"constant\": true\n//     },\n//     {\n//       \"inputs\": [],\n//       \"name\": \"donate\",\n//       \"outputs\": [],\n//       \"stateMutability\": \"payable\",\n//       \"type\": \"function\",\n//       \"payable\": true\n//     },\n//     {\n//       \"inputs\": [\n//         {\n//           \"internalType\": \"address payable\",\n//           \"name\": \"_to\",\n//           \"type\": \"address\"\n//         },\n//         {\n//           \"internalType\": \"uint256\",\n//           \"name\": \"_amount\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"name\": \"withdraw\",\n//       \"outputs\": [],\n//       \"stateMutability\": \"nonpayable\",\n//       \"type\": \"function\"\n//     },\n//     {\n//       \"inputs\": [],\n//       \"name\": \"getContractBalance\",\n//       \"outputs\": [\n//         {\n//           \"internalType\": \"uint256\",\n//           \"name\": \"\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"stateMutability\": \"view\",\n//       \"type\": \"function\",\n//       \"constant\": true\n//     },\n//     {\n//       \"inputs\": [],\n//       \"name\": \"getDonorCount\",\n//       \"outputs\": [\n//         {\n//           \"internalType\": \"uint256\",\n//           \"name\": \"\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"stateMutability\": \"view\",\n//       \"type\": \"function\",\n//       \"constant\": true\n//     }\n//   ];\n// // --- END CONFIGURATION ---\n\n// const App = () => {\n//     // State variables\n//     const [account, setAccount] = useState(null);\n//     const [provider, setProvider] = useState(null);\n//     const [signer, setSigner] = useState(null);\n//     const [contract, setContract] = useState(null);\n//     const [isAdmin, setIsAdmin] = useState(false);\n//     const [totalDonations, setTotalDonations] = useState('0');\n//     const [contractBalance, setContractBalance] = useState('0');\n//     const [donorCount, setDonorCount] = useState(0);\n//     const [donors, setDonors] = useState([]);\n    \n//     // Form inputs - Storing them in a single state object can help prevent re-render issues\n//     const [formData, setFormData] = useState({\n//         donationAmount: '',\n//         donorName: '',\n//         donorMessage: '',\n//         withdrawAmount: '',\n//         withdrawAddress: ''\n//     });\n\n//     // UI State\n//     const [loading, setLoading] = useState(false);\n//     const [error, setError] = useState('');\n//     const [successMessage, setSuccessMessage] = useState('');\n//     const [activeTab, setActiveTab] = useState('donate');\n\n//     // FIX for input fields: Handle all form changes with a single function\n//     const handleInputChange = (e) => {\n//         const { name, value } = e.target;\n//         setFormData(prev => ({ ...prev, [name]: value }));\n//     };\n\n//     const fetchContractData = useCallback(async (currentContract) => {\n//         if (!currentContract) return;\n//         try {\n//             console.log(\"Attempting to fetch contract data...\");\n//             const total = await currentContract.totalDonations();\n//             const balance = await currentContract.getContractBalance();\n//             const count = await currentContract.getDonorCount();\n\n//             setTotalDonations(ethers.utils.formatEther(total));\n//             setContractBalance(ethers.utils.formatEther(balance));\n//             setDonorCount(count.toNumber());\n//             console.log(\"‚úÖ Contract data fetched successfully.\");\n//             setError(''); \n//         } catch (err) {\n//             console.error(\"‚ùå Error fetching smart contract data:\", err);\n//             setError('Could not fetch data. Please follow the README troubleshooting steps.');\n//         }\n//     }, []);\n\n//     const fetchDonorsFromDB = useCallback(async () => {\n//         try {\n//             console.log(\"Attempting to fetch donor history from backend...\");\n//             const response = await axios.get('http://localhost:5001/api/donors');\n//             setDonors(response.data.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp)));\n//             console.log(\"‚úÖ Donor history fetched successfully.\");\n//         } catch (err) {\n//             console.error(\"‚ùå Error fetching donors from the database:\", err);\n//             setError('Could not fetch transaction history. Is the backend server running?');\n//         }\n//     }, []);\n\n//     // This useEffect should only run once to initialize everything\n//     useEffect(() => {\n//         const init = async () => {\n//             setError('');\n//             if (window.ethereum) {\n//                 try {\n//                     const web3Provider = new ethers.providers.Web3Provider(window.ethereum);\n//                     const web3Signer = web3Provider.getSigner();\n//                     // Request accounts on initial load\n//                     const accounts = await web3Provider.send('eth_requestAccounts', []);\n                    \n//                     const donationContract = new ethers.Contract(contractAddress, contractABI, web3Signer);\n\n//                     setProvider(web3Provider);\n//                     setSigner(web3Signer);\n//                     setAccount(accounts[0]);\n//                     setContract(donationContract);\n                    \n//                     const owner = await donationContract.owner();\n//                     setIsAdmin(accounts[0].toLowerCase() === owner.toLowerCase());\n\n//                     await fetchContractData(donationContract);\n//                     await fetchDonorsFromDB();\n\n//                 } catch (err) {\n//                     console.error(\"‚ùå Error during initialization:\", err);\n//                     setError(\"Failed to initialize. Please connect to MetaMask and follow the README troubleshooting guide.\");\n//                 }\n//             } else {\n//                 setError(\"MetaMask is not installed. Please install it to use this dApp.\");\n//             }\n//         };\n        \n//         init();\n\n//         if(window.ethereum) {\n//             window.ethereum.on('accountsChanged', () => window.location.reload());\n//             window.ethereum.on('chainChanged', () => window.location.reload());\n//         }\n//     }, [fetchContractData, fetchDonorsFromDB]);\n\n\n//     const handleDonate = async (e) => {\n//         e.preventDefault();\n//         const { donationAmount, donorName, donorMessage } = formData;\n\n//         if (!donationAmount || isNaN(donationAmount) || donationAmount <= 0 || !donorName) {\n//             setError(\"Please enter a valid name and donation amount.\");\n//             return;\n//         }\n//         if (!contract || !signer || !provider) {\n//             setError(\"Application not properly connected. Please refresh.\");\n//             return;\n//         }\n\n//         setLoading(true);\n//         setError('');\n//         setSuccessMessage('');\n\n//         try {\n//             const amountInWei = ethers.utils.parseEther(donationAmount);\n            \n//             const gasPrice = await provider.getGasPrice();\n//             const tx = await contract.connect(signer).donate({ \n//                 value: amountInWei,\n//                 gasPrice: gasPrice \n//             });\n            \n//             setSuccessMessage(\"Processing donation... waiting for blockchain confirmation.\");\n//             const receipt = await tx.wait();\n\n//             await axios.post('http://localhost:5001/api/donors', {\n//                 donorAddress: account,\n//                 name: donorName,\n//                 message: donorMessage,\n//                 amount: donationAmount,\n//                 transactionHash: receipt.transactionHash,\n//             });\n            \n//             setSuccessMessage(`Donation successful! Thank you! TX: ${receipt.transactionHash.slice(0, 6)}...${receipt.transactionHash.slice(-4)}`);\n//             setFormData(prev => ({ ...prev, donorName: '', donationAmount: '', donorMessage: ''}));\n            \n//             await fetchContractData(contract);\n//             await fetchDonorsFromDB();\n\n//         } catch (err) {\n//             console.error(\"Donation Error:\", err);\n//             setError(err.reason || \"Transaction failed. Please reset your MetaMask account (see README) and try again.\");\n//         } finally {\n//             setLoading(false);\n//         }\n//     };\n\n//     const handleWithdraw = async (e) => {\n//         e.preventDefault();\n//         const { withdrawAmount, withdrawAddress } = formData;\n//         if (!withdrawAmount || isNaN(withdrawAmount) || withdrawAmount <= 0 || !withdrawAddress) {\n//             setError(\"Please enter a valid amount and address.\");\n//             return;\n//         }\n//         if (!ethers.utils.isAddress(withdrawAddress)) {\n//             setError(\"Invalid recipient address.\");\n//             return;\n//         }\n\n//         setLoading(true);\n//         setError('');\n//         setSuccessMessage('');\n\n//         try {\n//             const amountInWei = ethers.utils.parseEther(withdrawAmount);\n//             const gasPrice = await provider.getGasPrice();\n//             const tx = await contract.connect(signer).withdraw(withdrawAddress, amountInWei, {\n//                 gasPrice: gasPrice\n//             });\n\n//             await tx.wait();\n//             setSuccessMessage(\"Withdrawal successful!\");\n//             await fetchContractData(contract);\n            \n//         } catch (err) {\n//             console.error(\"Withdrawal Error:\", err);\n//             setError(err.reason || \"Withdrawal failed. Please reset your MetaMask account and try again.\");\n//         } finally {\n//             setLoading(false);\n//         }\n//     };\n\n//     // --- UI Components ---\n//     // (Components are unchanged, but they now use formData state via handleInputChange)\n\n//     const Header = () => (\n//         <header className=\"bg-gray-800 text-white p-4 shadow-lg flex justify-between items-center\">\n//             <h1 className=\"text-2xl font-bold text-teal-400\">üõ°Ô∏è SecureAid</h1>\n//             {account && (\n//                 <div className=\"text-sm bg-gray-700 px-3 py-1 rounded-full\">\n//                     Connected: {account.slice(0, 6)}...{account.slice(-4)}\n//                 </div>\n//             )}\n//         </header>\n//     );\n\n//     const Stats = () => (\n//         <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n//             <div className=\"bg-gray-800 p-6 rounded-lg text-center shadow-md\">\n//                 <h3 className=\"text-lg text-gray-400 mb-2\">Total Donations Raised</h3>\n//                 <p className=\"text-4xl font-bold text-teal-400\">{parseFloat(totalDonations).toFixed(4)} ETH</p>\n//             </div>\n//             <div className=\"bg-gray-800 p-6 rounded-lg text-center shadow-md\">\n//                 <h3 className=\"text-lg text-gray-400 mb-2\">Total Unique Donors</h3>\n//                 <p className=\"text-4xl font-bold text-white\">{donorCount}</p>\n//             </div>\n//             <div className=\"bg-gray-800 p-6 rounded-lg text-center shadow-md\">\n//                 <h3 className=\"text-lg text-gray-400 mb-2\">Current Contract Balance</h3>\n//                 <p className=\"text-4xl font-bold text-green-400\">{parseFloat(contractBalance).toFixed(4)} ETH</p>\n//             </div>\n//         </div>\n//     );\n\n//     const Tabs = () => (\n//         <div className=\"mb-8 flex justify-center border-b border-gray-700\">\n//             <button onClick={() => setActiveTab('donate')} className={`px-6 py-3 font-semibold ${activeTab === 'donate' ? 'text-teal-400 border-b-2 border-teal-400' : 'text-gray-400'}`}>\n//                 Donate\n//             </button>\n//             {isAdmin && (\n//                 <button onClick={() => setActiveTab('admin')} className={`px-6 py-3 font-semibold ${activeTab === 'admin' ? 'text-teal-400 border-b-2 border-teal-400' : 'text-gray-400'}`}>\n//                     Admin Panel\n//                 </button>\n//             )}\n//         </div>\n//     );\n    \n//     const DonateForm = () => (\n//         <form onSubmit={handleDonate} className=\"space-y-4 max-w-lg mx-auto\">\n//             <input name=\"donorName\" type=\"text\" value={formData.donorName} onChange={handleInputChange} placeholder=\"Your Name\" className=\"w-full p-3 bg-gray-800 rounded-md border border-gray-700 focus:outline-none focus:ring-2 focus:ring-teal-400\" />\n//             <input name=\"donationAmount\" type=\"text\" value={formData.donationAmount} onChange={handleInputChange} placeholder=\"Amount in ETH (e.g., 0.1)\" className=\"w-full p-3 bg-gray-800 rounded-md border border-gray-700 focus:outline-none focus:ring-2 focus:ring-teal-400\" />\n//             <textarea name=\"donorMessage\" value={formData.donorMessage} onChange={handleInputChange} placeholder=\"Leave a message (optional)\" className=\"w-full p-3 bg-gray-800 rounded-md border border-gray-700 focus:outline-none focus:ring-2 focus:ring-teal-400\" rows=\"3\"></textarea>\n//             <button type=\"submit\" disabled={loading} className=\"w-full bg-teal-500 hover:bg-teal-600 text-white font-bold py-3 px-4 rounded-md transition duration-300 disabled:bg-gray-500\">\n//                 {loading ? 'Processing...' : 'Donate Now'}\n//             </button>\n//         </form>\n//     );\n\n//     const AdminPanel = () => (\n//         <form onSubmit={handleWithdraw} className=\"space-y-4 max-w-lg mx-auto\">\n//             <h2 className=\"text-xl font-bold text-center\">Admin Controls</h2>\n//             <input name=\"withdrawAddress\" type=\"text\" value={formData.withdrawAddress} onChange={handleInputChange} placeholder=\"Recipient Address\" className=\"w-full p-3 bg-gray-800 rounded-md border border-gray-700 focus:outline-none focus:ring-2 focus:ring-green-400\" />\n//             <input name=\"withdrawAmount\" type=\"text\" value={formData.withdrawAmount} onChange={handleInputChange} placeholder=\"Amount in ETH\" className=\"w-full p-3 bg-gray-800 rounded-md border border-gray-700 focus:outline-none focus:ring-2 focus:ring-green-400\" />\n//             <button type=\"submit\" disabled={loading} className=\"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-md transition duration-300 disabled:bg-gray-500\">\n//                 {loading ? 'Processing...' : 'Withdraw Funds'}\n//             </button>\n//         </form>\n//     );\n\n//     const TransactionHistory = () => (\n//         <div className=\"mt-12\">\n//             <h2 className=\"text-2xl font-bold text-center mb-6\">Live Transaction History</h2>\n//             <div className=\"max-w-4xl mx-auto bg-gray-800 rounded-lg shadow-lg p-4\">\n//                 <div className=\"space-y-4\">\n//                     {donors.length > 0 ? donors.map((donor, index) => (\n//                         <div key={index} className=\"bg-gray-700 p-4 rounded-md flex justify-between items-start\">\n//                             <div>\n//                                 <p className=\"font-bold text-teal-400\">{donor.name} <span className=\"text-gray-400 font-normal\">donated</span> {donor.amount} ETH</p>\n//                                 <p className=\"text-sm text-gray-300 mt-1\">\"{donor.message || 'No message'}\"</p>\n//                                 <p className=\"text-xs text-gray-500 mt-2\">From: {donor.donorAddress}</p>\n//                             </div>\n//                             <div className=\"text-right text-xs text-gray-400\">\n//                                 {new Date(donor.timestamp).toLocaleString()}\n//                                 <a href={`https://etherscan.io/tx/${donor.transactionHash}`} target=\"_blank\" rel=\"noopener noreferrer\" className=\"block text-teal-500 hover:underline mt-1\">View on Etherscan</a>\n//                             </div>\n//                         </div>\n//                     )) : (\n//                         <p className=\"text-center text-gray-400 py-4\">No donations yet. Be the first!</p>\n//                     )}\n//                 </div>\n//             </div>\n//         </div>\n//     );\n    \n//     return (\n//         <div className=\"bg-gray-900 text-white min-h-screen font-sans\">\n//             <Header />\n//             <main className=\"container mx-auto p-4 md:p-8\">\n//                 {error && <div className=\"bg-red-500 text-white p-3 rounded-md mb-4 text-center\">{error}</div>}\n//                 {successMessage && <div className=\"bg-green-500 text-white p-3 rounded-md mb-4 text-center\">{successMessage}</div>}\n                \n//                 <Stats />\n//                 <Tabs />\n\n//                 <div className=\"mt-8\">\n//                     {activeTab === 'donate' ? <DonateForm /> : null}\n//                     {activeTab === 'admin' && isAdmin ? <AdminPanel /> : null}\n//                 </div>\n                \n//                 <TransactionHistory />\n//             </main>\n//         </div>\n//     );\n// };\n\n// export default App;\n\n\n\n\n\n\n// import React, { useState, useEffect, useCallback } from 'react';\n// import { ethers } from 'ethers';\n// import axios from 'axios';\n\n// // --- IMPORTANT: CONFIGURE YOUR CONTRACT HERE ---\n// const contractAddress = \"0x78DF59611e694495DF4859d1be817211Dc49dA72\"; \n// const contractABI = [\n//     {\n//       \"inputs\": [],\n//       \"stateMutability\": \"nonpayable\",\n//       \"type\": \"constructor\"\n//     },\n//     {\n//       \"anonymous\": false,\n//       \"inputs\": [\n//         {\n//           \"indexed\": true,\n//           \"internalType\": \"address\",\n//           \"name\": \"donor\",\n//           \"type\": \"address\"\n//         },\n//         {\n//           \"indexed\": false,\n//           \"internalType\": \"uint256\",\n//           \"name\": \"amount\",\n//           \"type\": \"uint256\"\n//         },\n//         {\n//           \"indexed\": false,\n//           \"internalType\": \"uint256\",\n//           \"name\": \"timestamp\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"name\": \"DonationReceived\",\n//       \"type\": \"event\"\n//     },\n//     {\n//       \"anonymous\": false,\n//       \"inputs\": [\n//         {\n//           \"indexed\": true,\n//           \"internalType\": \"address\",\n//           \"name\": \"to\",\n//           \"type\": \"address\"\n//         },\n//         {\n//           \"indexed\": false,\n//           \"internalType\": \"uint256\",\n//           \"name\": \"amount\",\n//           \"type\": \"uint256\"\n//         },\n//         {\n//           \"indexed\": false,\n//           \"internalType\": \"uint256\",\n//           \"name\": \"timestamp\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"name\": \"Withdrawal\",\n//       \"type\": \"event\"\n//     },\n//     {\n//       \"inputs\": [],\n//       \"name\": \"donorCount\",\n//       \"outputs\": [\n//         {\n//           \"internalType\": \"uint256\",\n//           \"name\": \"\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"stateMutability\": \"view\",\n//       \"type\": \"function\",\n//       \"constant\": true\n//     },\n//     {\n//       \"inputs\": [\n//         {\n//           \"internalType\": \"address\",\n//           \"name\": \"\",\n//           \"type\": \"address\"\n//         }\n//       ],\n//       \"name\": \"donors\",\n//       \"outputs\": [\n//         {\n//           \"internalType\": \"uint256\",\n//           \"name\": \"\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"stateMutability\": \"view\",\n//       \"type\": \"function\",\n//       \"constant\": true\n//     },\n//     {\n//       \"inputs\": [],\n//       \"name\": \"owner\",\n//       \"outputs\": [\n//         {\n//           \"internalType\": \"address\",\n//           \"name\": \"\",\n//           \"type\": \"address\"\n//         }\n//       ],\n//       \"stateMutability\": \"view\",\n//       \"type\": \"function\",\n//       \"constant\": true\n//     },\n//     {\n//       \"inputs\": [],\n//       \"name\": \"totalDonations\",\n//       \"outputs\": [\n//         {\n//           \"internalType\": \"uint256\",\n//           \"name\": \"\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"stateMutability\": \"view\",\n//       \"type\": \"function\",\n//       \"constant\": true\n//     },\n//     {\n//       \"inputs\": [],\n//       \"name\": \"donate\",\n//       \"outputs\": [],\n//       \"stateMutability\": \"payable\",\n//       \"type\": \"function\",\n//       \"payable\": true\n//     },\n//     {\n//       \"inputs\": [\n//         {\n//           \"internalType\": \"address payable\",\n//           \"name\": \"_to\",\n//           \"type\": \"address\"\n//         },\n//         {\n//           \"internalType\": \"uint256\",\n//           \"name\": \"_amount\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"name\": \"withdraw\",\n//       \"outputs\": [],\n//       \"stateMutability\": \"nonpayable\",\n//       \"type\": \"function\"\n//     },\n//     {\n//       \"inputs\": [],\n//       \"name\": \"getContractBalance\",\n//       \"outputs\": [\n//         {\n//           \"internalType\": \"uint256\",\n//           \"name\": \"\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"stateMutability\": \"view\",\n//       \"type\": \"function\",\n//       \"constant\": true\n//     },\n//     {\n//       \"inputs\": [],\n//       \"name\": \"getDonorCount\",\n//       \"outputs\": [\n//         {\n//           \"internalType\": \"uint256\",\n//           \"name\": \"\",\n//           \"type\": \"uint256\"\n//         }\n//       ],\n//       \"stateMutability\": \"view\",\n//       \"type\": \"function\",\n//       \"constant\": true\n//     }\n//   ];\n\n// const App = () => {\n//     // State variables\n//     const [provider, setProvider] = useState(null);\n//     const [signer, setSigner] = useState(null);\n//     const [contract, setContract] = useState(null);\n//     const [account, setAccount] = useState(null);\n//     const [isOwner, setIsOwner] = useState(false);\n//     const [theme, setTheme] = useState('light');\n    \n//     // Data states\n//     const [contractBalance, setContractBalance] = useState('0');\n//     const [totalDonations, setTotalDonations] = useState('0');\n//     const [donorCount, setDonorCount] = useState(0);\n//     const [transactionHistory, setTransactionHistory] = useState([]);\n\n//     // Form states (FIXED: Using objects to manage forms)\n//     const [donationForm, setDonationForm] = useState({ name: '', message: '', amount: '' });\n//     const [withdrawForm, setWithdrawForm] = useState({ to: '', amount: '' });\n    \n//     // UI states\n//     const [error, setError] = useState('');\n//     const [success, setSuccess] = useState('');\n//     const [loading, setLoading] = useState(false);\n\n//     // --- Effects ---\n\n//     useEffect(() => {\n//         // Initialize theme based on localStorage or system preference\n//         if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {\n//             document.documentElement.classList.add('dark');\n//             setTheme('dark');\n//         } else {\n//             document.documentElement.classList.remove('dark');\n//             setTheme('light');\n//         }\n//         initWeb3();\n//     }, []);\n\n//     const fetchContractData = useCallback(async (currentContract) => {\n//         if (!currentContract) return;\n//         console.log(\"Attempting to fetch contract data...\");\n//         try {\n//             const balance = await currentContract.provider.getBalance(currentContract.address);\n//             setContractBalance(ethers.utils.formatEther(balance));\n\n//             const totalDonationsWei = await currentContract.totalDonations();\n//             setTotalDonations(ethers.utils.formatEther(totalDonationsWei));\n\n//             const count = await currentContract.getDonorCount();\n//             setDonorCount(count.toNumber());\n//             console.log(\"‚úÖ Contract data fetched successfully.\");\n//         } catch (err) {\n//             console.error(\"Error fetching contract data:\", err);\n//             setError(\"Could not fetch data from smart contract. Did you deploy it and update the address/ABI?\");\n//         }\n//     }, []);\n    \n//     const fetchDonorHistory = useCallback(async () => {\n//         console.log(\"Attempting to fetch donor history from backend...\");\n//         try {\n//             const response = await axios.get('http://localhost:5001/api/donors');\n//             setTransactionHistory(response.data);\n//             console.log(\"‚úÖ Donor history fetched successfully.\");\n//         } catch (err) {\n//             console.error(\"Error fetching donor history:\", err);\n//             setError(\"Could not fetch transaction history. Is the backend server running?\");\n//         }\n//     }, []);\n\n//     useEffect(() => {\n//         if (contract) {\n//             fetchContractData(contract);\n//             fetchDonorHistory();\n//         }\n//     }, [contract, fetchContractData, fetchDonorHistory]);\n\n//     // --- Functions ---\n//     const initWeb3 = async () => {\n//         if (window.ethereum) {\n//             try {\n//                 const web3Provider = new ethers.providers.Web3Provider(window.ethereum);\n//                 const web3Signer = web3Provider.getSigner();\n//                 const donationContract = new ethers.Contract(contractAddress, contractABI, web3Signer);\n                \n//                 setProvider(web3Provider);\n//                 setSigner(web3Signer);\n//                 setContract(donationContract);\n\n//                 const accounts = await window.ethereum.request({ method: 'eth_accounts' });\n//                 if (accounts.length > 0) {\n//                     setAccount(accounts[0]);\n//                     checkIfOwner(donationContract, accounts[0]);\n//                 }\n\n//                 window.ethereum.on('accountsChanged', (accounts) => {\n//                     const newAccount = accounts.length > 0 ? accounts[0] : null;\n//                     setAccount(newAccount);\n//                     if(newAccount && donationContract) {\n//                         checkIfOwner(donationContract, newAccount);\n//                     } else {\n//                         setIsOwner(false);\n//                     }\n//                 });\n\n//             } catch (err) {\n//                 console.error(\"Error initializing Web3:\", err);\n//                 setError(\"Could not initialize. Is MetaMask installed & configured?\");\n//             }\n//         } else {\n//             setError(\"Please install MetaMask to use this application.\");\n//         }\n//     };\n\n//     const connectWallet = async () => {\n//         try {\n//             const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n//             setAccount(accounts[0]);\n//         } catch (err) {\n//             console.error(\"Error connecting wallet:\", err);\n//             setError(\"Failed to connect wallet.\");\n//         }\n//     };\n\n//     const checkIfOwner = async (contractInstance, currentAccount) => {\n//         try {\n//             const ownerAddress = await contractInstance.owner();\n//             setIsOwner(ownerAddress.toLowerCase() === currentAccount.toLowerCase());\n//         } catch (err) { console.error(\"Could not check owner status:\", err); }\n//     };\n    \n//     // FIX: Generic handler to update form state objects\n//     const handleFormChange = (e, formSetter) => {\n//         formSetter(prev => ({ ...prev, [e.target.name]: e.target.value }));\n//     };\n\n//     const handleDonate = async (e) => {\n//         e.preventDefault();\n//         if (!donationForm.amount || isNaN(donationForm.amount) || parseFloat(donationForm.amount) <= 0) return setError(\"Please enter a valid amount.\");\n        \n//         setError(''); setSuccess(''); setLoading(true);\n//         try {\n//             const tx = await contract.donate({ value: ethers.utils.parseEther(donationForm.amount) });\n//             await tx.wait();\n//             await axios.post('http://localhost:5001/api/donors', { name: donationForm.name || \"Anonymous\", message: donationForm.message || \"No message\", amount: parseFloat(donationForm.amount), address: account, txHash: tx.hash });\n//             setSuccess(`Thank you for your donation of ${donationForm.amount} ETH!`);\n//             setDonationForm({ name: '', message: '', amount: '' }); // Reset form\n//             fetchContractData(contract);\n//             fetchDonorHistory();\n//         } catch (err) {\n//             console.error(\"Donation Error:\", err);\n//             setError(err.reason || \"Donation failed. Check console for details.\");\n//         } finally {\n//             setLoading(false);\n//         }\n//     };\n\n//     const handleWithdraw = async (e) => {\n//         e.preventDefault();\n//         if (!ethers.utils.isAddress(withdrawForm.to)) return setError(\"Invalid recipient address.\");\n//         if (!withdrawForm.amount || isNaN(withdrawForm.amount) || parseFloat(withdrawForm.amount) <= 0) return setError(\"Invalid amount.\");\n\n//         setError(''); setSuccess(''); setLoading(true);\n//         try {\n//             const tx = await contract.withdraw(withdrawForm.to, ethers.utils.parseEther(withdrawForm.amount));\n//             await tx.wait();\n//             setSuccess(`Successfully withdrew ${withdrawForm.amount} ETH.`);\n//             setWithdrawForm({ to: '', amount: '' }); // Reset form\n//             fetchContractData(contract);\n//         } catch (err) {\n//             console.error(\"Withdrawal Error:\", err);\n//             setError(err.reason || \"Withdrawal failed. Check console for details.\");\n//         } finally {\n//             setLoading(false);\n//         }\n//     };\n\n//     // NEW: Function to toggle between light and dark themes\n//     const toggleTheme = () => {\n//         const newTheme = theme === 'light' ? 'dark' : 'light';\n//         setTheme(newTheme);\n//         localStorage.setItem('theme', newTheme);\n//         document.documentElement.classList.toggle('dark', newTheme === 'dark');\n//     };\n\n//     return (\n//         <div className=\"min-h-screen bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200 transition-colors duration-300\">\n//             {/* Header */}\n//             <header className=\"bg-white dark:bg-gray-800 shadow-md sticky top-0 z-10\">\n//                 <div className=\"container mx-auto px-6 py-4 flex justify-between items-center\">\n//                     <h1 className=\"text-3xl font-bold\">SecureAid</h1>\n//                     <div className=\"flex items-center space-x-4\">\n//                         <button onClick={toggleTheme} className=\"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-2xl\">\n//                              {theme === 'light' ? 'üåô' : '‚òÄÔ∏è'}\n//                         </button>\n//                         {account ? (\n//                             <div className=\"text-sm font-mono bg-gray-100 dark:bg-gray-700 p-2 rounded-md\">\n//                                 {`${account.substring(0, 6)}...${account.substring(account.length - 4)}`}\n//                             </div>\n//                         ) : (\n//                             <button onClick={connectWallet} className=\"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300\">\n//                                 Connect Wallet\n//                             </button>\n//                         )}\n//                     </div>\n//                 </div>\n//             </header>\n\n//             <main className=\"container mx-auto px-6 py-8\">\n//                 {error && <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative mb-6\" role=\"alert\">{error}</div>}\n//                 {success && <div className=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg relative mb-6\" role=\"alert\">{success}</div>}\n                \n//                 {/* Stats */}\n//                 <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n//                     <StatCard title=\"Total Funds Raised\" value={`${parseFloat(totalDonations).toFixed(4)} ETH`} color=\"text-blue-500\" />\n//                     <StatCard title=\"Contract Balance\" value={`${parseFloat(contractBalance).toFixed(4)} ETH`} color=\"text-green-500\" />\n//                     <StatCard title=\"Total Unique Donors\" value={donorCount} color=\"text-purple-500\" />\n//                 </div>\n\n//                 <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start\">\n//                     {/* Donation Form */}\n//                     <FormCard title=\"Make a Donation\" onSubmit={handleDonate}>\n//                         <InputField name=\"name\" placeholder=\"Your Name (Optional)\" value={donationForm.name} onChange={e => handleFormChange(e, setDonationForm)} />\n//                         <InputField name=\"message\" placeholder=\"A brief message (Optional)\" value={donationForm.message} onChange={e => handleFormChange(e, setDonationForm)} isTextArea />\n//                         <InputField name=\"amount\" placeholder=\"Amount in ETH (e.g., 0.1)\" value={donationForm.amount} onChange={e => handleFormChange(e, setDonationForm)} required />\n//                         <button type=\"submit\" disabled={!account || loading} className=\"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg transition duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600\">\n//                             {loading ? 'Processing...' : 'Donate Now'}\n//                         </button>\n//                     </FormCard>\n\n//                     {/* Transaction History */}\n//                     <div className=\"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-lg\">\n//                         <h2 className=\"text-2xl font-bold mb-6\">Live Transaction History</h2>\n//                         <div className=\"space-y-4 max-h-96 overflow-y-auto\">\n//                             {transactionHistory.length > 0 ? transactionHistory.map((tx) => (\n//                                 <div key={tx._id} className=\"border-b border-gray-200 dark:border-gray-700 pb-4 last:border-b-0\">\n//                                     <p><span className=\"font-bold text-blue-500\">{tx.name}</span> donated <span className=\"font-bold\">{tx.amount} ETH</span></p>\n//                                     <p className=\"text-gray-600 dark:text-gray-400 italic\">\"{tx.message}\"</p>\n//                                     <p className=\"text-sm text-gray-500 font-mono mt-1\">{`From: ${tx.address.substring(0, 10)}...`}</p>\n//                                 </div>\n//                             )) : <p className=\"text-gray-500\">No donations recorded yet.</p>}\n//                         </div>\n//                     </div>\n//                 </div>\n\n//                 {/* Admin Panel */}\n//                 {isOwner && (\n//                     <div className=\"mt-8\">\n//                         <FormCard title=\"Admin Panel\" onSubmit={handleWithdraw}>\n//                              <InputField name=\"to\" placeholder=\"Recipient Address\" value={withdrawForm.to} onChange={e => handleFormChange(e, setWithdrawForm)} required />\n//                              <InputField name=\"amount\" placeholder=\"Amount to Withdraw (ETH)\" value={withdrawForm.amount} onChange={e => handleFormChange(e, setWithdrawForm)} required />\n//                              <button type=\"submit\" disabled={loading} className=\"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-4 rounded-lg transition duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600\">\n//                                 {loading ? 'Processing...' : 'Withdraw Funds'}\n//                             </button>\n//                         </FormCard>\n//                     </div>\n//                 )}\n//             </main>\n//         </div>\n//     );\n// };\n\n// // --- Helper Components ---\n// const StatCard = ({ title, value, color }) => (\n//     <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg text-center\">\n//         <h3 className=\"text-lg font-semibold text-gray-600 dark:text-gray-400\">{title}</h3>\n//         <p className={`text-4xl font-bold mt-2 ${color}`}>{value}</p>\n//     </div>\n// );\n\n// const FormCard = ({ title, onSubmit, children }) => (\n//     <div className=\"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-lg\">\n//         <h2 className={`text-2xl font-bold mb-6 ${title.includes(\"Admin\") ? 'text-red-500' : ''}`}>{title}</h2>\n//         <form onSubmit={onSubmit} className=\"space-y-4\">{children}</form>\n//     </div>\n// );\n\n// const InputField = ({ name, placeholder, value, onChange, isTextArea = false, required = false }) => {\n//     const commonProps = {\n//         name,\n//         placeholder,\n//         value,\n//         onChange,\n//         required,\n//         className: \"shadow-sm appearance-none border border-gray-300 dark:border-gray-600 rounded-lg w-full py-3 px-4 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500\"\n//     };\n//     return isTextArea ? <textarea {...commonProps} rows=\"3\" /> : <input type=\"text\" {...commonProps} />;\n// };\n\n// export default App;\n\n"],"mappings":"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C,QAAA,eAACxH,OAAA;QAAGuH,SAAS,EAAC,eAAe;QAAAC,QAAA,EAAC;MAA+B;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK;EACxJ;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAAA;EAAAH,QAAA,EAAAC,YAAA;EAAAC,UAAA;EAAAC,YAAA;AAAA,OACL,CACR;AAACmC,GAAA,GArBIxB,kBAAkB;AAuBxB,eAAepI,GAAG;;AASlB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAOA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AAAA,IAAAqI,EAAA,EAAAC,GAAA,EAAAC,GAAA,EAAAM,GAAA,EAAAG,GAAA,EAAAG,GAAA,EAAAC,GAAA,EAAAQ,GAAA;AAAAC,YAAA,CAAAxB,EAAA;AAAAwB,YAAA,CAAAvB,GAAA;AAAAuB,YAAA,CAAAtB,GAAA;AAAAsB,YAAA,CAAAhB,GAAA;AAAAgB,YAAA,CAAAb,GAAA;AAAAa,YAAA,CAAAV,GAAA;AAAAU,YAAA,CAAAT,GAAA;AAAAS,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}